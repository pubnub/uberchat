// server injected code
/* Debug info: {"server":"WEB522","utc_time":"2014-07-08 04:46:15.259","src_ip":"64.145.84.159","method":"HTTP/GET","api_key":"3_Wg9crmyjY3ezpaXBCfJH4s5tG0Ygid81wSzG8Z8bM-or7-rCwxK29QWEOLLjACs5","site_found":true} */
if (typeof gigya == 'undefined' || !gigya.isGigya) { gigya = { isGigya: true } };
if (!gigya.__initialized) {
gigya.__initialized = true;
gigya.env='prod';
gigya.gaeDomain='chat.gigya.com';
gigya.build={version:'5.1.3',time:'Sun 07/06/2014 10:18:50.96'};
if (typeof gigya.partnerSettings == 'undefined') {
    gigya.partnerSettings={authMode:'cookie',baseDomains:'boston.com,brandbowl2014.com,gigya-cs.com', ssoLogoutUrl:'http://www.boston.com/?_goto=logout', ssoKey:'3_Kd1nvXmhSjgAaMuIkBlcIXxwfu8Wycip5ufhnQepzvmcUCkvxjo3A0U1CGq067Ef'};
    gigya.partnerSettings.plugins={"apiDomain":"us1.gigya.com"};
}
gigya.providersConfig = {"facebook":{"appID":"135637993114591"}};
//end server injected code
// API adapters
var gigya;
(function(a){(function(f){(function(f){(function(e){(function(e){function c(d,c){c=a.utils.object.clone(c);if(a.partnerSettings.ssoKey){var k=b();c||(c={});var e=c.callback;c.callback=function(b){a.log.addLog("SSO: About to invoke callback for "+d+" with this response",b);e&&e(b)};c.m=d;c.d=h;c.lid=a.utils.xd._flashListenerID;a.thisScript.globalConf.legacyCrossSiteMethod&&"localstorage"!=a.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()&&(c.lid=a.thisScript.globalConf.legacyCrossSiteMethod+":"+
a.utils.xd._flashListenerID);"function"==typeof c.callback&&(c.callbackID="gig_sso_cb"+(new Date).getTime(),a.utils.xd.addMessageListener(c.callbackID,{},!1,c.callback),delete c.callback);c.sAPIKey=a.thisScript.APIKey;var f=a.utils.keyValue.serialize(c);k.src="https://cdns.gigya.com/gs/sso.htm?APIKey="+a.partnerSettings.ssoKey+"&version=1";var l=function(){k.src="https://cdns.gigya.com/gs/sso.htm?APIKey="+a.partnerSettings.ssoKey+"&version=1#"+(new Date).getTime()+"&"+f;a.utils.DOM.removeEventListener(k,
"load",l)};a.utils.DOM.addEventListener(k,"load",l);a.log.addLog("SSO: Calling "+d,{SSOKey:a.partnerSettings.ssoKey,params:c});document.body?a.utils.DOM.appendToBody(k):a.utils.functions.invokeOnPageLoad(function(){a.utils.DOM.appendToBody(k)})}else c&&c.callback&&c.callback()}function b(){var a=document.getElementById("gig_sso");a||(a=document.createElement("iframe"),a.style.width="30px",a.style.height="10px",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.id="gig_sso");
return a}function d(a){c("setToken",a)}var h=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2];e.getGroupToken=function(a){c("getToken",a)};e.setGroupTokenFromResponse=function(a,b,h){a.sessionInfo&&(a=a.sessionInfo);var c=a.expires_in,c=null==c||""===c||isNaN(c)?47304E7:0==c?null:1E3*c,e=new Date;e.setTime(e.getTime()+c);d({lt:a.login_token,expiration:null==c?0:e.getTime(),legacyCrossSiteMethod:h,callback:b})};e.setGroupToken=d;e.logout=function(a){c("logout",
a)};e.removeGroupToken=function(a){c("removeToken",a)}})(e.sso||(e.sso={}))})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(f){(function(f){(function(e){var f=function(){function c(a,d,h,g,c,e){"undefined"===typeof e&&(e={});this.id=a;this.baseUrl=d;this.methodName=h;this.params=g;this.callback=c;this.settings=e}c.prototype.getUrl=function(){return this.baseUrl+"/"+this.methodName};c.prototype.send=function(a){};c.prototype.getAuthParams=function(){var b={};if(this.params.oauth_token)this.params.authMode="token";else if(!this.params.noAuth){var d=a._.apiAdapters.web.tokenStore.get(this.params.APIKey);
if(d){this.sentLoginToken=d;var h=a.utils.cookie.get("gltexp_"+this.params.APIKey);null!=h&&(b.loginTokenExp=h);b.login_token=d}b.authMode="cookie"}delete this.params.noAuth;return b};return c}();e.BaseRequest=f})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(a._||(a._={}))})(gigya||(gigya={}));var __extends=this.__extends||function(a,f){function n(){this.constructor=a}for(var e in f)f.hasOwnProperty(e)&&(a[e]=f[e]);n.prototype=f.prototype;a.prototype=new n};
(function(a){(function(f){(function(f){(function(e){e.callback=function(c,b){!b&&c&&(b=c.context);if(b){var d=a._.apiAdapters.web.pendingRequests[b];d&&d.handleResponse(c)}};var f=function(c){function b(){c.apply(this,arguments);this.ifrName="gigyaPostIframe_"+(new Date).getTime();this.retry=0}__extends(b,c);b.prototype.addDefaultParams=function(){this.params.format="jsonp";this.params.callback=b.callbackName;this.params.context=this.id;a.utils.object.add(this.params,this.getAuthParams(),!0);this.sentLoginToken=
this.params.login_token};b.prototype.getCacheKey=function(){return this.methodName+"_"+a.utils.keyValue.serialize(this.params)};b.prototype.send=function(d){var b=this;if(!this.inProgress){a._.apiAdapters.web.pendingRequests[this.id]=this;this.inProgress=!0;this.params.sdk="js_"+a.build.version;this.addDefaultParams();var g=a.utils.keyValue.serialize(this.params);if(!d&&this.settings.cacheTimeout)g=this.getCacheKey(),a.utils.sessionCache.get(g,this.settings.cacheTimeout,function(d){d?(delete b.settings.cacheTimeout,
a._.apiAdapters.web.callback(d,b.id)):(b.inProgress=!1,b.send(!0))});else{d=0;a.localInfo.isIE&&(d=2048);var c=this.getUrl();a.events.global.dispatch({eventName:"jsonp-beforeRequest",url:c,params:this.params,level:9});4096>=c.length+1+g.length+d&&!this.settings.forcePost?a.utils.script.load(c+"?"+g,function(){a._.apiAdapters.web.callback({context:b.id,errorCode:500026,errorMessage:"Network_error"})}):a.utils.functions.invokeOnPageLoad(function(){var d=document.getElementById("gigyaRequestForms");
null==d&&(d=document.createElement("span"),d.id="gigyaRequestForms",d.style.display="none",a.utils.DOM.appendToBody(d));var g=b.getPostContainer();d.appendChild(g)})}}};b.prototype.createParamFormElements=function(){var d=[],b="";for(b in this.params)d=d.concat(['<textarea name="',b,'">']),"object"==typeof this.params[b]?d.push(a.utils.URL.URLEncode(a.utils.JSON.serialize(this.params[b]))):d.push(this.params[b]),d.push("</textarea>");return d.join("")};b.prototype.getPostContainer=function(){var d=
this;if(!this.postContainer){var b=document.createElement("span"),g=this.ifrName+"form",c=this.id;b.innerHTML=['<form accept-charset="UTF-8" id="',g,'" method="post" action="',this.getUrl(),"?context="+this.id+"&saveResponseID="+this.id+'" target="',this.ifrName,'">',this.createParamFormElements(),'<input name="utf8" type="hidden" value="&#x2713;" /><input type="submit" value="" /></form>'].join("");var e,f=a.utils.DOM.createElement("iframe",this.ifrName);f.setAttribute("id",this.ifrName);a.utils.DOM.addEventListener(f,
"load",function(){e?d.getSavedFormResponse(c):(window.setTimeout(function(){var a=document.getElementById(g);a&&a.submit()},10),e=!0)});b.appendChild(f);this.postContainer=b}return b};b.prototype.getSavedFormResponse=function(a){var h=this;(new b(a,this.baseUrl,"socialize.getSavedResponse",{APIKey:this.params.APIKey,saveResponseID:this.id,ucid:this.params.ucid},function(a){h.handleResponse(a)})).send()};b.prototype.getDataPendingTimeout=function(a){return 4>=a?500:8>=a?1E3:21>=a?2E3:39>=a?5E3:-1};
b.prototype.handleResponse=function(d){var b=this;this.settings.cacheTimeout&&a.utils.sessionCache.set(this.getCacheKey(),0==d.errorCode?d:null);null!=this.retryTimerID&&window.clearTimeout(this.retryTimerID);this.loaded=!0;this.inProgress=!1;100001==d.errorCode?(d=this.getDataPendingTimeout(this.retry++),0<d&&window.setTimeout(function(){b.send()},d)):(this.dispose(),this.callback(d))};b.prototype.dispose=function(){delete a._.apiAdapters.web.pendingRequests[this.id];this.postContainer&&a.utils.DOM.removeElement(this.postContainer);
delete this.postContainer};b.callbackName="gigya._.apiAdapters.web.callback";return b}(a._.apiAdapters.web.BaseRequest);e.JsonpRequest=f})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(f){(function(f){(function(e){var f=function(c){function b(a,b,g,e,f,l){"undefined"===typeof l&&(l={});c.call(this,a,b,g,e,f,l);this.windowName=this.methodName.replace(/\./g,"_").replace(/\//g,"")+"_"+(new Date).getTime();this.requestID=this.windowName+(new Date).getTime()}__extends(b,c);b.prototype.beforeRequest=function(){};b.prototype.afterResponse=function(d){d.dontClose&&"false"!=d.dontClose||a.utils.win.close(this.windowName);this.callback(d)};b.prototype.getAuthFlow=function(){return this.params.authFlow?
this.params.authFlow:"popup"};b.prototype.getStateString=function(){var d=a.utils.xd._flashListenerID;if(a.thisScript.globalConf.legacyCrossSiteMethod&&"localstorage"!=a.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()||a.localInfo.isIE&&window.navigator.msDoNotTrack)d=a.thisScript.globalConf.legacyCrossSiteMethod+":"+a.utils.xd._flashListenerID;var b=this.getAuthFlow(),d={domain:document.location.href.split("?")[0].split("#")[0],id:this.requestID,lid:d,messaging:a.localInfo.messagingMethod};
if("redirect"==b||a.localInfo.isWindowsPhone)d.sourceURL=window.top.document.location.href,this.params.redirectURL?(d.redirectURL=a.utils.URL.addParamsToURL(this.params.redirectURL,{gig_events:a.events.global.getEventsForOperation(this.methodName)}),d.addUserInfo=!0,this.params.redirectMethod&&(d.redirectMethod=this.params.redirectMethod)):d.sourceURL=a.utils.URL.addParamsToURL(d.sourceURL,{gig_events:a.events.global.getEventsForOperation(this.methodName)});this.params.provider&&"facebook"==this.params.provider.toLowerCase()&&
(d.invite=this.params.invite);(b=a.external.backplane.getChannelId())&&(d.bp_channel_url=b);return a.utils.keyValue.serialize(d)};b.prototype.getServerParamsString=function(){var d={},b;for(b in this.params)0!=b.indexOf("x_")&&null!=this.params[b]&&(d["x_"+b]=this.params[b],delete d[b]);d.x_APIKey&&(d.client_id=d.x_APIKey,delete d.x_APIKey);d.x_oauth_token&&(d.oauth_token=d.x_oauth_token,delete d.x_oauth_token);d.redirect_uri="/GS/AfterLogin.aspx";d.response_type=this.params.authCodeOnly?"code":"server_token";
d.format="jsonp";d.x_sdk="js_"+a.build.version;(b=a.utils.cookie.get("_gigRefUid_"+this.params.APIKey))&&(d.x_refUID=b);(b=a.utils.cookie.get("_gigRefUid_"+this.params.APIKey))&&(d.x_refUID=b);d.state=this.getStateString();a.utils.object.add(d,this.getAuthParams());a._.apiAdapters.web.useAPIProxy&&a._.apiAdapters.web.gmidTicket&&(d.gmidTicket=a._.apiAdapters.web.gmidTicket);delete d.redirectURL;this.sentLoginToken=d.login_token;return a.utils.keyValue.serialize(d)};b.prototype.send=function(){var b=
this;this.beforeRequest();var h=this.getServerParamsString(),g;this.params.provider&&(g=a.socialize._getProviderByName(this.params.provider.toLowerCase()));var c=null;null!=g&&(c=(this.params.enablePopupLocation?"location=1,toolbar=1":"toolbar=0,")+"menubar=0,resizable=1,scrollbars=1,width="+g.width+",height="+g.height);var e=this.methodName.split(".");a.reports.report(e[e.length-1],this.params.APIKey,this.params.cid,this.params.source,this.params.sourceData,{sn:g?g.toString():null});h=this.getUrl()+
"?"+h;"redirect"==this.getAuthFlow()?window.top.document.location.href=h:(a.utils.xd.addMessageListener(this.requestID,this.params,!0,function(a){b.afterResponse(a)}),a.utils.win.open(h,this.windowName,c))};return b}(a._.apiAdapters.web.BaseRequest);e.OauthRequest=f})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(f){(function(f){(function(e){var f=function(c){function b(){c.apply(this,arguments)}__extends(b,c);b.prototype.send=function(b){var h=this;if(a._.apiAdapters.web.proxyState.ready){var g=function(b){(b=a.utils.JSON.deserialize(b.data))&&b.id==h.id&&(a.utils.DOM.removeEventListener(window,"message",g),h.callback(b.response))};a.utils.DOM.addEventListener(window,"message",g);a.utils.object.add(this.params,this.getAuthParams());a._.apiAdapters.web.ifrAPIProxy.contentWindow.postMessage(this.json(),
"https://cdns.gigya.com")}else a._.apiAdapters.web.proxyState.error&&this.callback({context:this.id,errorCode:500026,errorMessage:"APIProxy error: "+a._.apiAdapters.web.proxyState.error})};b.prototype.json=function(){return a.utils.JSON.serialize({id:this.id,methodName:this.methodName,params:this.params,settings:this.settings})};return b}(a._.apiAdapters.web.BaseRequest);e.APIProxyRequest=f})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(f){(function(f){(function(e){(function(e){function c(b){b||(b=a.thisScript.APIKey);return b?"glt_"+b:"_gig_lt"}var b={};e.activeNamespaces={};e.get=function(b){return(b=a.utils.cookie.get(c(b)))?b.split("|")[0]:null};e.set=function(b,h,g,c){a.utils.localStorage.removeItem("gigyaSettings");b||(b=a.thisScript.APIKey);b?(a.utils.cookie.set("glt_"+b,h,g),a.utils.cookie.remove("gac_"+b)):a.utils.cookie.set("_gig_lt",h,g)};e.setFromGAC=function(d,h){if(a.thisScript.APIKey){var g=
a.utils.cookie.get("gac_"+a.thisScript.APIKey);g&&!d.neverTryGAC?('"'==g.charAt(0)&&'"'==g.charAt(g.length-1)&&(g=g.substring(1,g.length-1)),b[g]?h():(b[g]=!0,a.socialize.notifyLogin({ignoreApiQueue:!0,neverTryGAC:!0,authCode:g,APIKey:a.thisScript.APIKey,client_id:a.thisScript.APIKey},{callback:function(){a.utils.cookie.remove("gac_"+a.thisScript.APIKey);h();a.socialize.refreshUI({neverTryGAC:!0})}}))):h()}else h()};e.setFromSsoResponse=function(b,h){"undefined"===typeof h&&(h=a.thisScript.APIKey);
0==b.errorCode&&(e.set(h,b.login_token,b.expires_in),a.events.global.dispatchWhenHandlerAdded({eventName:"socialize.login"},null,function(b,d){a.socialize.getUserInfo({signIDs:!0,callback:function(h){b||(b={});0==h.errorCode?(b=a._.addUserInfoToEvent(h,{eventName:"login"},!0),a.external.backplane.executeOnInit(function(){a.external.backplane.getChannelId()&&a.socialize.notifySSOLogin({bp_channel_url:a.external.backplane.getChannelId()})})):b.cancel=!0;d(b)}})}),a.events.global.dispatchWhenHandlerAdded({eventName:"accounts.login"},
null,function(b,d){a.accounts.getAccountInfo({include:"profile,data",includeUserInfo:!1,callback:function(h){b||(b={});0==h.errorCode?(b.eventName="accounts.login",a.utils.object.extractProperties(h,b,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data")):b.cancel=!0;d(b)}})}))};e.remove=function(b){a._.apiAdapters.web.sso.removeGroupToken();b||(b=a.thisScript.APIKey);a.utils.cookie.remove("glt_"+b);a.utils.cookie.remove("_gig_lt")};e.migrateExisting=function(){var b=a.utils.cookie.get("_gig_lt");
b&&a.thisScript.APIKey&&!e.get()&&(a.utils.cookie.remove("_gig_lt"),e.set(null,b))};e.getTokenParam=function(b,h){var g=a.utils.cookie.get(c(b));if(g)return g=g.split("|"),1<g.length?a.utils.keyValue.deserialize(g[1])[h]:null}})(e.tokenStore||(e.tokenStore={}))})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(a._||(a._={}))})(gigya||(gigya={}));gigya.isGigya||(gigya.isGigya=!0);
(function(a){(function(f){(function(f){(function(e){var f=function(){return function(){}}();e.APIProxyState=f;e.useAPIProxy;e.ifrAPIProxy;e.proxyState;e.gmidTicket;e.callbacks={};e.pendingRequests={};f=function(){function c(){this.name="Web"}c.prototype.init=function(b){var d=this;this.initAPIProxy(function(){a.utils.functions.createAlias("gigya.auth.loginToken.get",a._.apiAdapters.web.tokenStore.get);d.checkReturnFromURL();d.isSessionValid(void 0,function(d){d?b():a._.apiAdapters.web.sso.getGroupToken({callback:function(d){d&&
a._.apiAdapters.web.tokenStore.setFromSsoResponse(d);b()}})})})};c.prototype.initAPIProxy=function(b){var d=this;if(this.shouldBypass3pc()&&"1"!=a.utils.localStorage.getItem("_gig_3pc_enabled")){var h=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2],c=a.utils.DOM.createHiddenIframe(("https:"==document.location.protocol?"https://cdns.gigya.com":"http://cdn.gigya.com")+"/gs/3PCTest.html#domain="+encodeURIComponent(h)),f=function(h){(h=a.utils.keyValue.deserialize(h.data))&&
"3pcTestResult"==h.id&&(a.utils.DOM.removeEventListener(window,"message",f),"true"==h.enabled?(a.utils.localStorage.setItem("_gig_3pc_enabled","1"),e.useAPIProxy=!1,e.gmidTicket=null,b()):(e.useAPIProxy=!0,d.loadAPIProxy(b)),c.parentElement.removeChild(c))};a.utils.DOM.addEventListener(window,"message",f)}else e.useAPIProxy=!1,b()};c.prototype.shouldBypass3pc=function(){var b=a.thisScript.globalConf.bypassCookiePolicy||"whenBlockedByDefault";return("whenBlockedByDefault"==b&&a.localInfo.isSafari||
"always"==b)&&!window._isAPIProxy&&window.postMessage&&!a.partnerSettings.customAPIDomainPrefix};c.prototype.loadAPIProxy=function(b){var d=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2];e.gmidTicket=a.utils.localStorage.getItem("_gig_gmidt");var d="https://cdns.gigya.com/gs/APIProxy.html#apiKey="+encodeURIComponent(a.thisScript.APIKey)+"&domain="+encodeURIComponent(d)+"&scriptUrl="+encodeURIComponent(a.thisScript.scriptElement.src)+"&hasTicket="+
(e.gmidTicket?"true":"false"),h=function(d){(d=a.utils.JSON.deserialize(d.data))&&d.apiKey==a.thisScript.APIKey&&(e.proxyState=d,e.proxyState.gmidTicket&&(e.gmidTicket=e.proxyState.gmidTicket,a.utils.localStorage.setItem("_gig_gmidt",e.gmidTicket,86400)),a.utils.DOM.removeEventListener(window,"message",h),b())};a.utils.DOM.addEventListener(window,"message",h);e.ifrAPIProxy=a.utils.DOM.createHiddenIframe(d)};c.prototype.isSessionValid=function(b,d){"undefined"===typeof b&&(b={});a._.apiAdapters.web.tokenStore.setFromGAC(b,
function(){if(d){var h=null!=a._.apiAdapters.web.tokenStore.get(b.APIKey)||null!=b.oauth_token;d(h)}})};c.prototype.registerForNamespaceEvents=function(b){};c.prototype.onPluginEvent=function(b){};c.prototype.getGmidTicket=function(b){b&&b(e.useAPIProxy?e.gmidTicket:null)};c.prototype.sendRequest=function(b,d,h,c){"undefined"===typeof c&&(c={});var f=this;this.beforeRequest(b,d,c);var k=this.getBaseUrl(b,d,c),m=this.getRequestId(k,b,d,c.disableCache);e.callbacks[m]=e.callbacks[m]||[];e.callbacks[m].push(h);
if(!e.pendingRequests[m]){var l;h=function(b){f.afterResponse(l,b,function(b){f.dispatchCallbacks(m,b)})};l=e.useAPIProxy&&0!=k.indexOf("http://")?new a._.apiAdapters.web.APIProxyRequest(m,k,b,d,h,c):new a._.apiAdapters.web.JsonpRequest(m,k,b,d,h,c);l.send()}};c.prototype.sendOauthRequest=function(b,d,c,g){var e=this;this.beforeRequest(b,d,g);var f=this.getBaseUrl(b,d,g),l=new a._.apiAdapters.web.OauthRequest("",f,b,d,function(b){e.afterResponse(l,b,function(b){c(b)})},g);l.send()};c.prototype.getBaseUrl=
function(b,d,c){b=b.split(".");b=a.partnerSettings.customAPIDomainPrefix?a.partnerSettings.customAPIDomainPrefix+"."+a.partnerSettings.baseDomain:a.utils.stringUtils.format("{0}.{1}",b[0],a.partnerSettings.plugins.apiDomain);return((a._.apiAdapters.web.tokenStore.get()||d.regToken||d.oauth_token)&&!d.noAuth||c.forceHttps||"https"==a.thisScript.protocol?"https://":"http://")+b};c.prototype.beforeRequest=function(b,d,c){"undefined"===typeof c&&(c={});c.clearSession&&a._.apiAdapters.web.tokenStore.remove(d.APIKey)};
c.prototype.afterResponse=function(b,a,c){var g=this;this.handleTokenResponse(b,a,function(){g.logoutSsoIfNeeded(b,a,function(){c(a)})})};c.prototype.onSDKEvent=function(b){};c.prototype.getTokenParam=function(b,d){return a._.apiAdapters.web.tokenStore.getTokenParam(b,d)};c.prototype.checkReturnFromURL=function(){var b=a.utils.URL.getParamsFromURL(document.location.href);b.gig_events&&0==b.errorCode&&null!=a._.apiAdapters.web.tokenStore.get()&&a._.apiAdapters.web.sso.setGroupTokenFromResponse({errorCode:0,
login_token:a._.apiAdapters.web.tokenStore.get(),expires_in:b.expires_in},function(){var d=b.gig_events.split(",");-1!=a.utils.array.indexOf(d,"accounts.login")?a.accounts.getAccountInfo({include:"profile,data,userinfo",callback:function(b){var c={errorCode:0,eventName:"accounts.login"};a.utils.object.extractProperties(b,c,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data");a.events.global.dispatchWhenHandlerAdded(c);-1!=a.utils.array.indexOf(d,"socialize.login")&&(b=a._.addUserInfoToEvent(b,
{errorCode:0,eventName:"socialize.login"},!0),a.events.global.dispatchWhenHandlerAdded(b))}}):a.socialize.getUserInfo({signIDs:!0,callback:function(b){for(var c=0;c<d.length;c++){var e=a._.addUserInfoToEvent(b,{errorCode:0,eventName:d[c]},!0);a.events.global.dispatchWhenHandlerAdded(e)}}})},a.thisScript.globalConf.legacyCrossSiteMethod)};c.prototype.setNewLoginTokenFromResponse=function(b,d,c){var g=d.sessionInfo?d.sessionInfo.login_token:d.login_token;g?(a._.apiAdapters.web.tokenStore.set(b.params.APIKey,
g,null!=d.sessionInfo?d.sessionInfo.expires_in:d.expires_in,a.thisScript.globalConf.legacyCrossSiteMethod),a._.apiAdapters.web.sso.setGroupTokenFromResponse(d,c,a.thisScript.globalConf.legacyCrossSiteMethod)):c()};c.prototype.onInvalidTokenResponse=function(b,d){a._.apiAdapters.web.sso.getGroupToken({callback:function(c){c&&c.login_token&&c.login_token.split("|")[0]!=b.sentLoginToken?(a._.apiAdapters.web.tokenStore.setFromSsoResponse(c,b.params.APIKey),b.send()):(a._.apiAdapters.web.tokenStore.remove(b.params.APIKey),
b.settings.requiresSession?d():(delete b.params.login_token,delete b.sentLoginToken,b.send()))}})};c.prototype.handleTokenResponse=function(b,d,c){var g=this;d=a.utils.object.clone(d);if(403030==d.errorCode){if(this.shouldWaitForService(b,d))return}else 409012==d.errorCode&&(e.gmidTicket=null,a.utils.localStorage.removeItem("_gig_gmidt"));b.sentLoginToken&&a._.logoutMethods[b.methodName]&&0==d.errorCode&&a._.apiAdapters.web.tokenStore.remove(b.params.APIKey);this.setNewLoginTokenFromResponse(b,d,
function(){if(b.sentLoginToken&&403005==d.errorCode)g.onInvalidTokenResponse(b,c);else c()})};c.prototype.logoutSsoIfNeeded=function(b,d,c){var g=this;a.partnerSettings.ssoKey&&a._.logoutMethods[b.methodName]&&0==d.errorCode?document.location.href!=a.partnerSettings.ssoLogoutUrl?a._.apiAdapters.web.sso.logout({callback:function(b){g.loadLogoutUrls(b.logoutURLs.split(","),c,{UID:d.UID,UIDSignature:d.UIDSignature,signatureTimestamp:d.signatureTimestamp})}}):c():c()};c.prototype.loadLogoutUrls=function(b,
d,c){for(var g=0,e=0;e<b.length;e++){var f=a.utils.URL.addParamsToURL(b[e],c);this.loadLogoutUrl(f,function(){g++;g>=b.length&&d()})}};c.prototype.loadLogoutUrl=function(b,d,c){"undefined"===typeof c&&(c=5E3);var g=document.createElement("iframe");g.src=b;g.style.position="absolute";g.style.top="-1000px";g.style.left="-1000px";var e=!1;window.setTimeout(function(){e||(e=!0,g.parentElement.removeChild(g),d())},c);g.onload=g.onreadystatechange=function(){e||g.readyState&&"complete"!=g.readyState||(e=
!0,g.parentElement.removeChild(g),d())};a.utils.DOM.appendToBody(g)};c.prototype.shouldWaitForService=function(b,d){return!0==b.params.retryPossible?(b.params.retryPossible=!1,a.external.facebook.runWhenLoaded(function(){b.send()}),!0):!1};c.prototype.dispatchCallbacks=function(b,d){var c=e.callbacks[b];if(c)for(var g=0;g<c.length;g++)if("function"==typeof c[g])c[g](a.utils.object.clone(d));delete e.callbacks[b]};c.prototype.getRequestId=function(b,d,c,e){var f=-1!=navigator.userAgent.toLowerCase().indexOf("safari/534");
if(e||f)b="R"+(new Date).getTime()+"_"+Math.random();else{c=a.utils.object.clone(c);for(var k in c)0!=k.indexOf("fb_")&&"source"!=k&&"sourceData"!=k||delete c[k];b="R"+a.utils.object.getMurmurHash(b+d+a.utils.object.getHash(c))}return b};return c}();e.WebAdapter=f})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(f){(function(f){(function(e){var f=function(){function c(){this.flashStorageLoaded=!1;this.swfStorage=null;var b=document.location.href.split("#")[1];this.apiKey=decodeURIComponent(b.split("apiKey=")[1].split("&")[0]);this.originDomain=decodeURIComponent(b.split("domain=")[1].split("&")[0]);this.hasTicket="true"===decodeURIComponent(b.split("hasTicket=")[1].split("&")[0]);this.urlScheme=0==document.location.href.indexOf("https:")?"https":"http"}c.init=function(){c.instance=
new c;c.instance.init()};c.prototype.init=function(){var b=this;this.isOriginDomainValid()?this.loadIDs(function(d){d?b.postState({ready:!1,error:d}):(b.gmid&&b.ucid?b.hasTicket?b.postState({ready:!0}):b.getGmidTicketFromServer(function(a){b.postState({ready:!0,gmidTicket:a})}):b.getIDsFromServer(function(a,d,c){b.gmid=a;b.ucid=c;b.storeIDs(function(){b.postState({ready:!0,gmidTicket:d})})}),a.utils.DOM.addEventListener(window,"message",function(a){return b.onRequest(a)}))}):this.postState({ready:!1,
error:"domain_mismatch"})};c.prototype.onRequest=function(b){var d=this;b=a.utils.JSON.deserialize(b.data);var c=b.methodName,e=b.id;if(b&&c&&b.params){var f=a.utils.object.clone(b.params,!0,!0);f.gmid=this.gmid;f.ucid=this.ucid;(new a._.apiAdapters.web.JsonpRequest(e,this.getAPIBaseUrl(c),c,f,function(b){window.parent.postMessage(a.utils.JSON.serialize({id:e,response:b}),d.originDomain)},b.settings)).send()}};c.prototype.isOriginDomainValid=function(){for(var b=a.partnerSettings.baseDomains.split(","),
d=0;d<b.length;d++){var c=b[d];if(this.originDomain.indexOf(c)==this.originDomain.length-c.length)return!0}return!1};c.prototype.getIDsFromServer=function(b){var d={APIKey:this.apiKey,includeTicket:!0,ticketExpires:86400};(new a._.apiAdapters.web.JsonpRequest("idsRequest",this.getAPIBaseUrl("socialize.getIDs"),"socialize.getIDs",d,function(a){b(a.gcid,a.gmidTicket,a.ucid)})).send()};c.prototype.getGmidTicketFromServer=function(b){var d={gmid:this.gmid,APIKey:this.apiKey,expires:86400};(new a._.apiAdapters.web.JsonpRequest("gmidTicketRequest",
this.getAPIBaseUrl("socialize.getGmidTicket"),"socialize.getGmidTicket",d,function(a){b(a.gmidTicket)})).send()};c.prototype.getAPIBaseUrl=function(b){b=b.split(".");return"https://"+a.utils.stringUtils.format("{0}.{1}",b[0],a.partnerSettings.plugins.apiDomain)};c.prototype.postState=function(b){b||(b={});b.apiKey=this.apiKey;window.parent.postMessage(a.utils.JSON.serialize(b),this.originDomain)};c.prototype.loadIDs=function(b){var a=this;this.getIDsFromStorage(function(c,e,f){a.gmid=c;a.ucid=e;b(f)})};
c.prototype.getIDsFromStorage=function(b){var d=this,e,f;try{e=localStorage.getItem(c.GMID_STORAGE_KEY),f=localStorage.getItem(c.UCID_STORAGE_EKY),b(e,f)}catch(l){a.localInfo.isMobile?b(null,null,"no_supported_cookie_storage"):this.loadFlashStorageJS(function(a){if(a)var e=d.swfStorage.get(c.GMID_STORAGE_KEY),f=d.swfStorage.get(c.UCID_STORAGE_EKY);else var g="no_supported_cookie_storage";b(e,f,g)})}};c.prototype.storeIDs=function(b){var a=this;try{localStorage.setItem(c.GMID_STORAGE_KEY,this.gmid),
localStorage.setItem(c.UCID_STORAGE_EKY,this.ucid),b()}catch(e){this.loadFlashStorageJS(function(e){e&&(a.swfStorage.set(c.GMID_STORAGE_KEY,a.gmid),a.swfStorage.set(c.UCID_STORAGE_EKY,a.ucid));b()})}};c.prototype.loadFlashStorageJS=function(b){var d=this,c=function(a){d.flashStorageLoaded=!0;try{d.swfStorage?a(!0):d.swfStorage=new SwfStore({namespace:"gigIDs",swf_url:"https://cdns.gigya.com/gs/swf/swfstore.swf",onready:function(){a(!0)},onerror:function(){console&&console.log("Failed loading swfstore.swf");
a(!1)}})}catch(b){a(!1)}};this.flashStorageLoaded?c(b):a.utils.script.load("https://cdns.gigya.com/gs/js/swfstore.min.js",null,function(){c(b)})};c.GMID_STORAGE_KEY="gig_gmid";c.UCID_STORAGE_EKY="gig_ucid";return c}();e.APIProxy=f})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(a._||(a._={}))})(gigya||(gigya={}));
var gigya;
(function(f){(function(d){(function(d){(function(d){d.mobileCallbacks={};d.showPlugin=function(b,a){var c,e=b.split(".");1<e.length?(b=e.splice(e.length-1,1)[0],e=e.join(".")):e="socialize";"commentsUI"==b&&(e="comments");c||(c="show"+f.utils.stringUtils.capitalize(b));eval("gigya."+e+"."+c)(a)};var l=function(){function b(){this.name="Mobile"}b.prototype.init=function(a){var c=this;f.events.addMap({defaultMethod:function(a){c.onPluginEvent(a)},eventMap:[{events:"*",args:["$event"]}]});this.sendToMobile("get_ids",
null,function(e){c.ucid=e.ucid;c.gcid=e.gcid;for(var b in f.events.global._activeNamespaces)c.registerForNamespaceEvents(b);a()})};b.prototype.getTokenParam=function(a,c){return""};b.prototype.onPluginEvent=function(a){a.isGlobal||this.sendToMobile("on_plugin_event",a)};b.prototype.onCustomEvent=function(a){this.sendToMobile("on_custom_event",a)};b.prototype.registerForNamespaceEvents=function(a){this.sendToMobile("register_for_namespace_events",{namespace:a})};b.prototype.getGmidTicket=function(a){a&&
this.sendToMobile("send_request/socialize.getGmidTicket",{expires:30},function(c){a(c.gmidTicket)},{forceHttps:!0})};b.prototype.isSessionValid=function(a,c){this.sendToMobile("is_session_valid",{},c)};b.prototype.sendRequest=function(a,c,b,d){this.sendToMobile("send_request/"+a,c,b,d)};b.prototype.sendOauthRequest=function(a,c,b,d){this.sendToMobile("send_oauth_request/"+a,c,b,d)};b.prototype.sendToMobile=function(a,b,e,k){var g=document.createElement("iframe");g.style.display="none";document.documentElement.appendChild(g);
b&&delete b.APIKey;if(e){var h=(new Date).getTime()+"_"+Math.random();d.mobileCallbacks[h]=function(a){e(a);document.documentElement.removeChild(g);delete d.mobileCallbacks[h]}}a="gsapi://"+a+"?callbackID="+(h||"")+"&params="+(b?encodeURIComponent(f.utils.keyValue.serialize(b)):"")+"&settings="+(k?encodeURIComponent(f.utils.keyValue.serialize(k)):"");g.src=a};b.prototype.onSDKEvent=function(a){a&&a.user&&f._.convertIdentitiesArrayToObject(a.user);f.events.global.dispatch(a)};return b}();d.MobileAdapter=
l})(d.mobile||(d.mobile={}))})(d.apiAdapters||(d.apiAdapters={}))})(f._||(f._={}))})(gigya||(gigya={}));

// end API adapters
var gigya;
(function(a){var k=navigator.userAgent.toLowerCase(),b=new Date,g=document.location.href.split("?")[0].split("#")[0].split("/")[2].split(":")[0],e=-1!=k.indexOf("win"),d=-1!=k.indexOf("msie")||-1!=k.indexOf("mozilla")&&-1!=k.indexOf("trident"),c=-1!=k.indexOf("msie 6."),h=-1!=k.indexOf("msie 7."),l=-1!=k.indexOf("msie 8."),f=-1!=k.indexOf("msie 9."),s=-1!=k.indexOf("mozilla")&&-1!=k.indexOf("trident/7.0"),n=-1!=k.indexOf("iphone")||-1!=k.indexOf("ipad")||-1!=k.indexOf("ipod"),m;m=-1!=k.indexOf("applewebkit")&&-1!=
k.indexOf("version/")?parseInt(k.split("version/")[1].split(" ")[0]):0;var r=-1!=k.indexOf("android"),p;p=-1!=k.indexOf("android")?parseFloat(k.slice(k.indexOf("android")+8)):0;var t=-1!=k.indexOf("chrome"),q=-1!=k.indexOf("firefox"),v=-1!=k.indexOf("opera"),u=navigator.appVersion&&-1!=navigator.appVersion.toLowerCase().indexOf("safari")&&-1==navigator.appVersion.toLowerCase().indexOf("chrome")&&-1==k.indexOf("android"),x=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),w=
-1!=k.indexOf("crios"),y=navigator.appVersion&&-1!=navigator.appVersion.toLowerCase().indexOf("mac")?!0:!1,A=-1!=k.indexOf("windows phone"),B=null!=window.postMessage&&(-1==k.indexOf("msie")||-1!=k.indexOf("iemobile")),z;try{z=null!=window.localStorage}catch(C){z=!1}a.localInfo={initTime:b,version:0,pageDomain:g,userAgent:k,isWin:e,isIE:d,isIE6:c,isIE7:h,isIE8:l,isIE9:f,isIE11:s,isIOS:n,iosVersion:m,isAndroid:r,androidVersion:p,isChrome:t,isFF:q,isOpera:v,isSafari:u,isIOSWebView:x,isIOSChrome:w,isMAC:y,
isWindowsPhone:A,supportsPostMessage:B,supportsLocalStorage:z,quirksMode:"BackCompat"==document.compatMode&&-1!=k.indexOf("msie"),backCompat:"BackCompat"==document.compatMode,isMobile:function(){var a="(iphone;android;midp;240x320;blackberry;netfront;nokia;panasonic;portalmmm;sharp;sie-;sonyericsson;symbian;windows ce;benq;mda;mot-;opera mini;philips;pocket pc;sagem;samsung;htc".split(";"),c;for(c in a)if(-1!=k.indexOf(a[c]))return!0;return!1}(),isTouch:function(){if("ontouchstart"in window)return!0;
if("onmsgesturechange"in window)try{new ActiveXObject("htmlfile")}catch(a){return!0}return!1}(),messagingMethod:0}})(gigya||(gigya={}));
(function(a){var k=navigator.userAgent.toLowerCase();(function(b){(function(a){a.indexOf=function(a,c){for(var h=0;h<a.length;h++)if(a[h]==c)return h;return-1};a.clone=function(a){for(var c=[],h=0;h<a.length;h++)c[h]=a[h];return c};a.removeByValue=function(a,c){if(a)for(var h=a.length-1;0<=h;h--)a[h]==c&&a.splice(h,1)};a.removeByProperty=function(a,c,h){if(a)for(var l=a.length-1;0<=l;l--)a[l][c]==h&&a.splice(l,1)};a.getArrayFromString=function(a,c,h){if(!a||"string"!=typeof a)return[];h&&(a=a.toLowerCase());
return(a=a.replace(/[ ]/g,"").replace(/,,/g,","))?a.split(c):[]}})(b.array||(b.array={}));(function(a){a.create=function(a,c){for(var h=0;h<arguments.length-2;h++);return function(){return c.apply(a,arguments)}}})(b.delegate||(b.delegate={}));(function(b){b.fill=function(d,c){"function"==typeof d&&(d=d(c));d instanceof Array&&(d=d.join(""));var h=/(\$)(!?)([a-z_][a-z_.\d]*)([(][^()]*[)])?|(\$)(!?)\{([a-z_][a-z_.\d]*)([(][^()]*[)])?\}/gi;h.lastIndex=0;for(var l=d,f=h.exec(l),b;null!=f;){b="$"==f[1]?
0:4;var e="!"==f[2+b],m=f[3+b];b=f[4+b];null==b&&(b="");"."==m.substring(0,1)&&(m=m.substring(1));"DBG"==m.substring(0,3)&&(m=m.substring(3));var r="";for(b=m+b;b!=r;){var r=b,p=h.lastIndex;b=a.utils.templates.fill(r,c);h.lastIndex=p}r="";p=0;if(null!=c[m.split(".")[0]])try{r=(new Function("o","p",'return eval("o." + p)'))(c,b)}catch(g){}else r="$"+(e?"!":"")+b,p=1;l=e?l.replace(f[0],""):l.substr(0,f.index)+r+l.substr(f.index+f[0].length);h.lastIndex=f.index+p;f=h.exec(l)}return l}})(b.templates||
(b.templates={}));(function(b){b.callFunction=function(a,c){var h=eval(a),l=a.split(".");l.splice(l.length-1,1);l=eval(l.join("."));h.apply(l,c)};b.invokeOnPageLoad=function(d,c){if(!document.readyState&&document.body||"loaded"==document.readyState||"complete"==document.readyState||!c&&"interactive"==document.readyState&&document.body)d();else{var h=!1,l=function(){h||(h=!0,d())};window.setTimeout(l,2E4);a.utils.DOM.addEventListener(window,"load",l);a.utils.DOM.addEventListener(document,"DOMContentLoaded",
l)}};b.createAlias=function(a,c){for(var h=a.split("."),l=window,f=0;f<h.length-1;f++){var b=h[f];l[b]||(l[b]={});l=l[b]}l[h[h.length-1]]=c}})(b.functions||(b.functions={}));(function(b){var d={};b.open=function(c,h,l){if(a.localInfo.isIE&&2048<c.length||4096<c.length)a.utils.redirect(c.split("?")[0],[a.utils.URL.getParamsFromURL(c)],"POST","_blank");else{l||(l="menubar=0,toolbar=0,resizable=1,scrollbars=1,width=960,height=680");var f=l;try{var b=parseInt(l.split("width=")[1].split(",")[0]),e=parseInt(l.split("height=")[1].split(",")[0]),
m=(screen.width-b)/2,r=(screen.height-e)/2;0>m&&(m=0);0>r&&(r=0);f+=",top="+r+",left="+m}catch(p){}(c=window.open(c,h,f))&&c.focus&&c.focus();d[h]=c}return null!=d[h]};b.close=function(c){if(null!=d[c]){var h=function(){try{null!=d[c]&&d[c].close(),delete d[c]}catch(a){}};6<=a.localInfo.iosVersion?h():window.setTimeout(h,10)}}})(b.win||(b.win={}));(function(a){a.isExplicitTrue=function(a){a=(""+a).toLowerCase();return"true"==a||"1"==a};a.isExplicitFalse=function(a){a=(""+a).toLowerCase();return"false"==
a||"0"==a}})(b.validation||(b.validation={}));(function(b){function d(a,c,h){if(!c)return a;c=c.split(".");for(var d=0;d<c.length;d++){var b=c[d];h&&!a[b]&&(a[b]={});if(a[b])a=a[b];else return null}return a}function c(a,h,d,b,e,r){e||(e=0);if("undefined"==typeof a||null==a||"function"==typeof a&&d)return null;if(a.constructor==Array){for(var p=[],g=0;g<a.length;g++)d&&"function"==typeof a[g]||(p[g]=h?c(a[g],h,d,b,e+1,r):a[g]);return p}if("object"==typeof a){p={};for(g in a)r&&"context"==g||d&&"function"==
typeof a[g]||(p[g]=h?c(a[g],h,d,b,e+1,r):a[g]);return p}return a}function h(c,d,b){if(null!=c){null==d&&(d={});if(c.constructor==Array)for(var e=0;e<c.length;e++)h(c[e],d,b);else if(b){b=b.split("|");var e={},m;for(m in c)e[m.toLowerCase()]=1;for(m=0;m<b.length;m++){var r=b[m];e[r.toLowerCase()]&&(d[r]=c[r])}}else d=a.utils.object.clone(c,!1);return d}}b.removeUndefined=function(a){var c={},h;for(h in a)null!=a[h]&&void 0!=a[h]&&(c[h]=a[h]);return c};b.getPropertyBySerializedName=d;b.setPropertyBySerializedName=
function(a,c,h){c=c.split(".");var b=c.pop();d(a,c.join("."),!0)[b]=h};b.add=function(a,c,h){for(var d in c)h&&"undefined"!=typeof a[d]||(a[d]=c[d])};b.getHash=function(c){var h=[],d;for(d in c){var b;"object"==typeof c[d]?b=a.utils.JSON.serialize(c[d],!1):c[d]&&(b=c[d].toString());h.push(d+"="+b)}return h.sort().join("&")};b.getMurmurHash=function(a,c){c||(c=0);var h,d,b,e,p;h=a.length&3;d=a.length-h;b=c;for(p=0;p<d;)e=a.charCodeAt(p)&255|(a.charCodeAt(++p)&255)<<8|(a.charCodeAt(++p)&255)<<16|(a.charCodeAt(++p)&
255)<<24,++p,e=3432918353*(e&65535)+((3432918353*(e>>>16)&65535)<<16)&4294967295,e=e<<15|e>>>17,e=461845907*(e&65535)+((461845907*(e>>>16)&65535)<<16)&4294967295,b^=e,b=b<<13|b>>>19,b=5*(b&65535)+((5*(b>>>16)&65535)<<16)&4294967295,b=(b&65535)+27492+(((b>>>16)+58964&65535)<<16);e=0;switch(h){case 3:e^=(a.charCodeAt(p+2)&255)<<16;case 2:e^=(a.charCodeAt(p+1)&255)<<8;case 1:e^=a.charCodeAt(p)&255,e=3432918353*(e&65535)+((3432918353*(e>>>16)&65535)<<16)&4294967295,e=e<<15|e>>>17,b^=461845907*(e&65535)+
((461845907*(e>>>16)&65535)<<16)&4294967295}b^=a.length;b^=b>>>16;b=2246822507*(b&65535)+((2246822507*(b>>>16)&65535)<<16)&4294967295;b^=b>>>13;b=3266489909*(b&65535)+((3266489909*(b>>>16)&65535)<<16)&4294967295;return(b^b>>>16)>>>0};b.clone=c;b.merge=function(a){for(var c={},h=0;h<a.length;h++)if(a[h]&&a[h].length)for(var b=0;b<a[h].length;b++)for(var d in a[h][b])c[d]=a[h][b][d];else for(d in a[h])c[d]=a[h][d];return c};b.extractProperties=h;b.extractProperty=function(a,c){return h(a,void 0,c)[c]}})(b.object||
(b.object={}));(function(b){function d(c,h,l,d,s){var n=a.localInfo.pageDomain,m=a.partnerSettings.baseDomain;null==d&&(d=0<m.length&&n.length>=m.length&&n.lastIndexOf(m)==n.length-m.length?m:n);l=null==l||""===l||isNaN(l)?47304E7:0==l?null:1E3*l;m=new Date;m.setTime(m.getTime()+l);d=c+"="+escape(h)+(s?"":"; path=/")+(null==l?"":"; expires="+m.toUTCString())+(d&&""!=d&&-1!=d.indexOf(".")?"; domain="+d:"");document.cookie=d;l&&!(0<l)||b.get(c)||(d=c+"="+escape(h)+(s?"":"; path=/")+(null==l?"":"; expires="+
m.toUTCString())+(n&&""!=n&&-1!=n.indexOf(".")?"; domain="+n:""),document.cookie=d)}b.get=function(a){a=a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1").replace(/^[ \t]+|[ \t]+$/g,"");return(a=document.cookie.match(RegExp("(?:^|;)\\s?"+a+"=(.*?)(?:;|$)")))&&unescape(a[1])};b.set=d;b.remove=function(c){var h=a.localInfo.pageDomain,l=a.partnerSettings.baseDomain;0<l.length&&h.length>=l.length&&h.lastIndexOf(l)==h.length-l.length&&(d(c,"",-1,l),d(c,"",-1,l,!0));d(c,"",-1,a.localInfo.pageDomain);d(c,"",
-1,a.localInfo.pageDomain,!0);d(c,"",-1,"");d(c,"",-1,"",!0)}})(b.cookie||(b.cookie={}));(function(a){a.sanitizeHTML=function(a){return null==a||"undefined"==typeof a?a:a.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\"/g,"&#34;").replace(/'/g,"&#39;").replace(/&#38;#173;/g,"&#173;")};a.sanitizeAttribute=function(a){return null==a||"undefined"==typeof a?a:a.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\"/g,"&#34;").replace(/\=/g,"&#61;")}})(b.sanitize||
(b.sanitize={}));(function(a){function b(a,h,l,f){f||(f=0);if(10<f)return"[Too deep]";var e="",n="",m="";if(l)for(var m="\t",n="\n",g=0;g<f+1;g++)e+=m;var p=typeof a;if("function"==p)return p.toString();if("object"!=p||null===a)return"string"==p&&(a='"'+a.replace(/\"/g,'\\"').replace(/\r|\n|\r\n/g,"\\n")+'"'),String(a);var k,q,v=[],u=a&&a.constructor==Array;if(u)for(g=0;g<a.length;g++)q=a[g],p=typeof q,null==q||"undefined"==p?q="":"string"==p?q='"'+q.replace(/\"/g,'\\"').replace(/\r|\n|\r\n/g,"\\n")+
'"':"function"==p?q=h?"[Function]":"":q.parentNode&&q.innerHTML?q="[HTML Element]":q.constructor==Date?q="":"object"==p&&null!==q&&(q=b(q,h,l,f+1)),""!=String(q)&&v.push(e+m+String(q));else for(k in a)q=a[k],p=typeof q,null==q||"undefined"==p?q=String(q):"string"==p?q='"'+q.replace(/\"/g,'\\"').replace(/\r|\n|\r\n/g,"\\n")+'"':"function"==p?q=h?"[Function]":"":q.parentNode&&q.innerHTML?q="[HTML Element]":q.constructor==Date?q="":"object"==p&&null!==q&&(q=n+b(q,h,l,f+1)),""!=String(q)&&v.push(e+m+
'"'+k.replace(/\"/g,'\\"')+'":'+String(q));return n+e+(u?"[":"{")+n+v.join(","+n)+n+e+(u?"]":"}")}a.serialize=b;a.deserialize=function(a){""===a&&(a='""');eval("var o");try{eval("o="+a)}catch(h){}return eval("o")}})(b.JSON||(b.JSON={}));(function(a){function b(){var a=0,c=0;"number"==typeof window.pageYOffset?(c=window.pageYOffset,a=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(c=document.body.scrollTop,a=document.body.scrollLeft):document.documentElement&&
(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(c=document.documentElement.scrollTop,a=document.documentElement.scrollLeft);return{left:a,top:c}}function c(){var a,c;c=document.documentElement;var b=document.body;window.innerHeight?(a=window.innerHeight,c=window.innerWidth):(a=c.clientHeight,0==a&&(a=b.clientHeight),c=c.clientWidth,0==c&&(c=b.clientWidth));return{w:c,h:a}}a.getScroll=b;a.getFullSize=function(){var a=document.documentElement,c=document.body,b=a.clientHeight;
0==b&&(b=c.clientHeight);a=a.clientWidth;0==a&&(a=c.clientWidth);return{w:a,h:b}};a.getInnerSize=c;a.getMiddleCenter=function(){var a=b(),l=c();return{top:a.top+Math.floor(l.h/2),left:a.left+Math.floor(l.w/2)}};a.isRectHorizontallyVisible=function(a){var l=b(),f=c();return a.left>=l.left&&a.right<=l.left+f.w};a.isRectFullyVisible=function(a){var l=b(),f=c();return a.top>=l.top&&a.bottom<=l.top+f.h&&a.left>=l.left&&a.right<=l.left+f.w}})(b.viewport||(b.viewport={}));var g=b.viewport;(function(a){a.getPosition=
function(){var a=0,c=0;if(document.body){var h=null,h={clientX:0,clientY:0};if(h.pageX||h.pageY)a=h.pageX,c=h.pageY;else if(h.clientX||h.clientY)a=h.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c=h.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{x:a,y:c}}}})(b.mouse||(b.mouse={}));(function(b){function d(a,h,b){"undefined"!==typeof b&&(b=(new Date).getTime()+1E3*b,h=h+"|exp="+b);c(a,h)}var c=function(a,c){},h=function(a){return null},l=function(a){};
if(a.localInfo.supportsLocalStorage)c=function(a,c){try{window.localStorage[a]=c}catch(h){}},h=function(a){return window.localStorage[a]},l=function(a){window.localStorage.removeItem(a)};else if(a.localInfo.isIE6||a.localInfo.isIE7)var f,s=function(){f||(f=document.createElement("div"),f.addBehavior("#default#userData"),a.utils.DOM.appendToBody(f))},n=function(){try{s(),f.save("gigya_ud")}catch(a){}},m=function(){try{s(),f.load("gigya_ud")}catch(a){}},c=function(a,c){m();f.setAttribute(encodeURIComponent(a).replace(/\%/g,
""),c);n()},h=function(a){m();return f.getAttribute(encodeURIComponent(a).replace(/\%/g,""))},l=function(a){m();f.removeAttribute(encodeURIComponent(a).replace(/\%/g,""));n()};else if(a.localInfo.isFF)var g=window.globalStorage,c=function(a,c){try{g[location.hostname][a]=c}catch(h){}},h=function(a){return g[location.hostname][a]},l=function(a){delete g[location.hostname][a]};b.getItem=function(a){var c=h(a);if(c&&c.split){var b=c.split("|exp=");if(1<b.length){var d=parseInt(b[1]);if((new Date).getTime()<
d)return b[0];l(a)}}return c};b.setItem=d;b.removeItem=function(a){l(a)};b.setObject=function(c,h){d(c,a.utils.JSON.serialize(h))};b.getObject=function(c){c=this.getItem(c);try{c=a.utils.JSON.deserialize(c)}catch(h){}return c}})(b.localStorage||(b.localStorage={}));(function(b){b.URLEncode=function(a){return encodeURIComponent(a)};b.URLDecode=function(a){return decodeURIComponent(a).replace(/\+/g," ")};b.getParamsFromURL=function(b,c){return-1==b.indexOf("?")?{}:a.utils.keyValue.deserialize(b.split("#")[0].split("?")[1],
"&",c)};b.getParamValueFromURL=function(a,c,h){if(null==c||""==c)return h;var b=c.indexOf("?");if(-1==b)return h;b="&"+c.substr(b+1);c=b.toLowerCase().indexOf("&"+a.toLowerCase()+"=");if(-1==c)return h;a=b.substr(c+(1+a.length+1))+"&";c=a.indexOf("&");return a.substr(0,c)};b.addParamsToURL=function(b,c){var h=a.utils.URL.getParamsFromURL(b);a.utils.object.add(h,c);var l=b.split("#"),h=l[0].split("?")[0]+"?"+a.utils.keyValue.serialize(h,"&");1<l.length&&(h+="#"+l[1]);return h}})(b.URL||(b.URL={}));
(function(b){b.serialize=function(b,c){var h=[];c||(c="&");for(var l in b)switch(typeof b[l]){case "function":break;case "array":case "object":null!=b[l]&&h.push(l+"="+a.utils.URL.URLEncode(a.utils.JSON.serialize(b[l])));break;case "undefined":break;default:h.push(l+"="+a.utils.URL.URLEncode(b[l]))}return h.join(c)};b.deserialize=function(b,c,h,l){var f={};if(!b)return f;c||(c="&");b=b.split(c);for(c=0;c<b.length;c++){var e=b[c],n=e.indexOf("=");if(-1==n){var m=h?e.toLowerCase():e;f[m]="1"}else{m=
e.substr(0,n);h&&(m=m.toLowerCase());e=e.substr(n+1).replace(/\+/g," ");try{f[m]=l?unescape(e):a.utils.URL.URLDecode(e)}catch(g){f[m]=unescape(e)}}}return f}})(b.keyValue||(b.keyValue={}));(function(b){b._nextZIndex=999999999;b._popupContainers=[];b._pseudoContainers=[];var d=null;b.addEventListener=function(a,h,b){a&&b&&(window.addEventListener?a.addEventListener(h,b,!0):a.attachEvent("on"+h,b))};b.removeEventListener=function(a,h,b){b&&(window.removeEventListener?a.removeEventListener(h,b,!0):a.detachEvent("on"+
h,b))};b.addDialogBackListener=function(c){a.utils.DOM._removeDialogBackListener();d=function(h){h&&h.newURL&&-1==h.newURL.indexOf("|gigyaMobileDialog")&&(c(h),a.utils.DOM._removeDialogBackListener())};window.setTimeout(function(){-1==window.location.hash.indexOf("|gigyaMobileDialog")&&(window.location.hash+="|gigyaMobileDialog");a.utils.DOM.addEventListener(window,"hashchange",d)},50)};b._removeDialogBackListener=function(){d&&(a.utils.DOM.removeEventListener(window,"hashchange",d),d=null,window.location.hash=
window.location.hash.replace("|gigyaMobileDialog",""))};b.appendToBody=function(a){document.body&&(document.body.insertBefore&&document.body.firstChild?document.body.insertBefore(a,document.body.firstChild):document.body.appendChild(a))};b.removeElement=function(a){a&&a.parentElement&&a.parentElement.removeChild(a)};b.isChildOf=function(a,h){for(var b=a.parentNode;b;){if(h==b)return!0;b=b.parentNode}return!1};b.isVisible=function(c){if(!c||!c.parentNode||c.style&&"none"==c.style.display)return!1;
if(c.parentNode)return a.utils.DOM.isVisible(c.parentNode)};b.getCenteredDivID=function(c){return"gig_"+a.localInfo.initTime.getTime().toString()+"_"+c};b.createTopLevelDiv=function(c){var h;h=document.createElement("iframe");h.id="gigya_ifr_"+c;h.frameborder="0";h.frameBorder="0";h.allowtransparency=!0;h.style.position="absolute";h.style.width=a.localInfo.isChrome?"30px":"1px";h.style.height="1px";null!=h.style.zIndex&&(h.style.zIndex=a.utils.DOM._nextZIndex++);a.localInfo.isIE6&&(h.src=a.thisScript.base+
"/gs/blank.htm");var b=document.createElement("div");b.style.position="absolute";null!=b.style.zIndex&&(b.style.zIndex=""+a.utils.DOM._nextZIndex++);b.innerHTML="";c&&(b.id=c);document.body&&document.body.insertBefore&&(document.body.firstChild?(null!=h&&document.body.insertBefore(h,document.body.firstChild),document.body.insertBefore(b,document.body.firstChild)):document.body.appendChild&&(null!=h&&document.body.appendChild(h),document.body.appendChild(b)));return b};b.hideByID=function(a){if(a=
document.getElementById(a))a.style.display="none"};b.showByID=function(c){if(c=document.getElementById(c))c.style.display=a.localInfo.isIE6?"TD"==c.tagName?"table-cell":"TR"==c.tagName?"":"TABLE"==c.tagName?"":"block":""};b.clearByID=function(a){try{var h=document.getElementById(a);null!=h&&(h.innerHTML="")}catch(b){}};b.getHTMLSize=function(a,h){var b=document.createElement("div");b.style.position="absolute";b.style.left="-1000px";b.innerHTML=a;h.appendChild(b);var d=b.offsetWidth,e=b.offsetHeight;
b.parentNode.removeChild(b);return{w:d,h:e}};b.getElementsByClass=function(a,h){if(!a)return[];for(var b=[],d=a.getElementsByTagName("*"),e=0;e<d.length;e++){var n=d[e].className;if(n)for(var n=n.split(" "),m=0;m<n.length;m++)n[m]==h&&b.push(d[e])}return b||[]};b.getElementsByAttribute=function(a,b,d,f){var e=[];a=a.getElementsByTagName(b);for(b=0;b<a.length;b++)a[b].getAttribute(d)==f&&e.push(a[b]);return e};b.getElementPosition=function(c){if(!c)return{left:0,top:0,bottom:0,right:0};c=c.getBoundingClientRect();
var b=a.utils.viewport.getScroll(),d=c.left+b.left,b=c.top+b.top;return{left:d,top:b,right:d+c.width,bottom:b+c.height}};b.addClassToElement=function(a,b){if(a){for(var d=!1,f=a.className.split(" "),e=0;e<f.length;e++)if(f[e]==b){d=!0;break}d||(f.push(b),a.className=f.join(" "))}};b.removeClassFromElement=function(a,b){if(a){for(var d=a.className.split(" "),f=d.length-1;0<=f;f--)d[f]==b&&d.splice(f,1);a.className=d.join(" ")}};b.isElementClass=function(a,b){if(a){for(var d=!1,f=a.className.split(" "),
e=0;e<f.length;e++)if(f[e]==b){d=!0;break}return d}};b.cancelEvent=function(a){a&&("cancelable"in a?a.preventDefault():a.returnValue=!1)};b.createElement=function(a,b){var d=document.createElement("div");b=b||"";d.innerHTML="<"+a+' name="'+b+'" id="'+b+'"></'+a+">";return d.firstChild};b.setSize=function(c,b,d,f){if(null!=c&&null!=c.style){var e=""+(0<(""+b).indexOf("%")?b:b+"px"),n=""+(0<(""+b).indexOf("%")?d:d+"px");if(c.style.width!=e||c.style.height!=n)void 0==b||isNaN(b)||(c.style.width=e),void 0==
d||isNaN(d)||(c.style.height=n);if(f&&b&&d){if(null==c.style.zIndex||f)c.style.zIndex=(this._nextZIndex++).toString();f=g.getInnerSize();e=a.utils.viewport.getScroll();n=e.left;c.style.top=""+Math.max(0,e.top+Math.floor((f.h-d)/2))+"px";c.style.left=""+Math.max(0,n+Math.floor((f.w-b)/2))+"px";c.style.visibility=""}}};b.createHiddenIframe=function(c){var b=document.createElement("iframe");b.src=c;b.style.width="30px";b.style.height="10px";b.style.position="absolute";b.style.top="-1000px";b.style.left=
"-1000px";document.body?a.utils.DOM.appendToBody(b):a.utils.functions.invokeOnPageLoad(function(){a.utils.DOM.appendToBody(b)});return b}})(b.DOM||(b.DOM={}));(function(b){function d(c){c=a.utils.object.clone(c);var b=function(){var b=c.data.split("="),d=l[b[0]];if(null!=d){if("function"==typeof d.callback){var f=unescape(b[1]),f=a.utils.keyValue.deserialize(f,null,null,!0);d.callback(f,d.context)}h(b[0]);(b=document.getElementById(b[0]))&&b.parentElement&&b.parentElement.removeChild(b)}};c&&c.data&&
c.data.split&&(6<=a.localInfo.iosVersion?b():window.setTimeout(b,100))}function c(c){var b=document.createElement("iframe");b.style.width="30px";b.style.height="10px";b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";b.id=c;b.src="https://cdns.gigya.com/gs/LocalStorageListener.htm?mode=receive&id="+encodeURIComponent(c);a.utils.DOM.appendToBody(b);return b}function h(a){delete l[a]}var l={};b._flashListenerID="flid"+(new Date).getTime();var f=!1,g={};b._onFlashMessage=function(c){c=
a.utils.keyValue.deserialize(c,null,null,!0);var b=c.id,d=l[b];null!=d&&("function"==typeof d.callback&&d.callback(c,d.context),h(b))};b.addMessageListener=function(h,m,k,p){l[h]={callback:p,context:m,t:(new Date).getTime()};m=a.localInfo.messagingMethod;if(0==m||1==m)0==m&&k&&c(h),f||(h=function(a){var c=a.data.split("=")[0];l[c]&&d(a)},window.addEventListener?window.addEventListener("message",h,!1):window.attachEvent&&window.attachEvent("onmessage",h),f=!0);else{var t="localstorage";a.thisScript.globalConf.legacyCrossSiteMethod&&
"localstorage"!=a.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()&&(t=a.thisScript.globalConf.legacyCrossSiteMethod);g[t]||window.setTimeout(function(){var c=document.createElement("div");c.style.width="1px";c.style.height="1px";c.style.overflow="hidden";c.style.position="absolute";c.style.left="-1000px";var h=b._flashListenerID;"localstorage"!=t&&(h=t+":"+b._flashListenerID);var d=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2],l=(new Date).getTime(),
f=document.createElement("object");f.setAttribute("id","eventsBroadcaster"+l);f.setAttribute("codebase","https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0");f.setAttribute("width","50");f.setAttribute("height","50");f.setAttribute("src","https://cdns.gigya.com/GS/swf/eventsBroadcaster2.swf");l=document.createElement("param");l.name="movie";l.setAttribute("value","https://cdns.gigya.com/GS/swf/eventsBroadcaster2.swf");f.appendChild(l);l=document.createElement("param");
l.setAttribute("name","allowScriptAccess");l.setAttribute("value","always");f.appendChild(l);l=document.createElement("param");l.setAttribute("name","FlashVars");l.setAttribute("value","action=listen&id="+h+"&eventName=loginComplete&callback=gigya.utils.xd._onFlashMessage&domain="+d);f.appendChild(l);c.appendChild(f);a.utils.functions.invokeOnPageLoad(function(){a.utils.DOM.appendToBody(c);f.setAttribute("type","application/x-shockwave-flash");f.setAttribute("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000")});
g[t]=!0},500)}};b.removeMessageListener=h})(b.xd||(b.xd={}));(function(b){var d={};b.load=function(c,b,l,f){f&&d[c]?d[c].loaded?l&&l():(d[c].onLoad.push(l),d[c].onError.push(b)):(f=function(){var f=document.createElement("script");f.async=!0;f.type="text/javascript";f.charset="UTF-8";d[c]||(d[c]={loaded:!1,onLoad:[l],onError:[b]});var e=d[c],g=!1,k=function(){if(!g){d[c].loaded=!0;for(var a=0;a<e.onLoad.length;a++)if("function"==typeof e.onLoad[a])e.onLoad[a]();g=!0;setTimeout(function(){f.parentNode&&
f.parentNode.removeChild(f)},5E3)}};f.onload=k;f.onreadystatechange=function(){"loaded"==this.readyState&&k()};f.onerror=function(){for(var a=0;a<e.onError.length;a++)if("function"==typeof e.onError[a])e.onError[a]();delete d[c]};var p=document.getElementsByTagName("head");p&&0<p.length&&p[0].appendChild(f);p=function(){f.src=c};6<=a.localInfo.iosVersion?p():setTimeout(p,1)},a.localInfo.isIE?a.utils.functions.invokeOnPageLoad(f):f())}})(b.script||(b.script={}));(function(b){b.set=function(b,c){if(window.sessionStorage){var h;
try{(h=a.utils.JSON.deserialize(window.sessionStorage.getItem("gigyaCache")))||(h={}),null==c&&h[b]?delete h[b]:h[b]={response:c,time:(new Date).getTime()},window.sessionStorage.setItem("gigyaCache",a.utils.JSON.serialize(h))}catch(l){}a.utils.queue.release("cache","cache_"+b)}};b.get=function(b,c,h){if(window.sessionStorage)try{if(!a.utils.queue.isActive("cache_"+b)){var l=window.sessionStorage.getItem("gigyaCache"),f=a.utils.JSON.deserialize(l),e=f?f[b]:null;if(e){if(c&&c+e.time>(new Date).getTime()){h(e.response);
return}a.utils.sessionCache.remove(b);e=null}if(!e){a.utils.queue.hold("cache","cache_"+b);h(null);return}}a.utils.queue.isActive("cache_"+b)&&a.utils.queue.waitFor("cache_"+b,a.utils.sessionCache.get,arguments)}catch(g){h(null)}else"function"==typeof h&&h(null)};b.remove=function(b){a.utils.sessionCache.set(b,null)}})(b.sessionCache||(b.sessionCache={}));(function(a){a.format=function(a){for(var c=0;c<arguments.length-1;c++);for(c=0;c<arguments.length-1;c++)null!=arguments[c+1]&&(a=a.split("{"+c+
"}").join(arguments[c+1]));return a};a.capitalize=function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}})(b.stringUtils||(b.stringUtils={}));(function(b){var d=null;b.isModern=function(){return a.localInfo.isChrome||a.localInfo.isFF||a.localInfo.isOpera||a.localInfo.isIOSWebView||a.localInfo.isIE&&9<=a.utils.browser.getVersion()||a.localInfo.isSafari&&4<=a.utils.browser.getVersion()};b.getVersion=function(){if(d)return d;try{var a=k.match(/(opera|chrome|safari|firefox|msie|trident.*rv:)\/?\s*(\.?\d+(\.\d+)*)/i);
if(a[2]){var b=a[2].split(".")[0];if(!isNaN(parseInt(b)))return d=parseInt(b)}}catch(l){}return 0}})(b.browser||(b.browser={}));(function(b){function d(a){if(!c[a])return!1;var b=0,d;for(d in c[a].ids)b++;return 0<b}var c={};b.isActive=d;b.release=function(a,b){if(c[b]&&(delete c[b].ids[a],!d(b))){var f=c[b].q;for(c[b].q=[];0<f.length;){var e=f.splice(0,1)[0];try{e.func.apply(this,e.args)}catch(g){console&&console.log("Gigya: Exception while invoking queued method ("+b+": "+a+")")}if(d(b)){c[b].q=
f;break}}}};b.hold=function(a,b){c[b]||(c[b]={q:[],ids:{}});c[b].ids[a]=!0};b.waitFor=function(a,b,d){c[a]||(c[a]={q:[],ids:{}});c[a].q.push({func:b,args:d})};b.queueForExecution=function(c,b,d){d=d||[];a.utils.queue.isActive(c)?a.utils.queue.waitFor(c,b,d):b.apply(this,d)}})(b.queue||(b.queue={}));b.redirect=function(b,d,c,h){if(c&&"post"==c.toLowerCase()){c=document.createElement("form");var l=[];c.setAttribute("accept-charset","UTF-8");c.setAttribute("method","POST");c.setAttribute("action",b);
h&&c.setAttribute("target",h);b=a.utils.object.merge(d);for(var f in b)"boolean"!=typeof b[f]&&"string"!=typeof b[f]||"eventName"==f||l.push('<textarea name="'+encodeURIComponent(f)+'">'+b[f].toString().replace(/\&/g,"&amp;")+"</textarea>");c.innerHTML=l.join("");c.style.display="none";a.utils.DOM.appendToBody(c);c.submit()}else{c=b.split("?");b=c[0];h={};if(1<c.length)for(c=c[1].split("&"),l=0;l<c.length;l++){var g=c[l].split("=");h[decodeURIComponent(g[0])]=decodeURIComponent(g[1])}for(c=0;c<d.length;c++)for(f in l=
d[c],l)"boolean"!=typeof l[f]&&"string"!=typeof l[f]||"eventName"==f||(h[f]=l[f]);d=[];for(f in h)d.push(f+"="+encodeURIComponent(h[f]));document.location.href=b+"?"+d.join("&")}}})(a.utils||(a.utils={}))})(gigya||(gigya={}));(function(a){a.socialize={};a.gcs={};a.gm={};a.comments={};a.accounts={};a.chat={};a.gscounters={}})(gigya||(gigya={}));
(function(a){(function(k){var b={};k.getApi=function(a){return b[a]};var g=function(){function e(a,c){this.methodName=a;this.settings=c;this.addAlias();b[a]=this}e.prototype.run=function(a){};e.prototype.preprocessRequest=function(a,c){this.settings.preprocessor?this.settings.preprocessor(a,c):c()};e.prototype.addAlias=function(){var b=this;a.utils.functions.createAlias("gigya."+this.methodName,function(){var c=function(){var c=a.utils.object.merge([a.thisScript.globalConf,h]);b.run(c)},h=a.utils.object.merge([arguments]);
a.thisScript&&a.thisScript.globalConf?c():a.utils.queue.queueForExecution("API",c)})};return e}();k.BaseApi=g})(a._||(a._={}))})(gigya||(gigya={}));(function(a){a.defaultEventMaps=a.defaultEventMaps||[]})(gigya||(gigya={}));
(function(a){(function(k){(function(b){function g(c,b,d,f){var e=function(c){var d=0;c.cancel||(d=a.events.global.dispatch(c,b));f&&f(d)};d?d(c,e):e(c)}var e={},d={};b._activeNamespaces={};b.add=function(c,b,l,f,k){k||(k="socialize");c=k+"_"+c;l||(l="other");e[c]||(e[c]=[]);e[c].push({handler:b,type:l,context:f});!this._activeNamespaces[k]&&a._.apiAdapter&&a._.apiAdapter.registerForNamespaceEvents(k);this._activeNamespaces[k]=1;if((b=d[c])&&"other"==l)for(d[c]=[],l=0;l<b.length;l++)f=b[l],g(f.eventObj,
f.params,f.preProcess)};b.remove=function(a){};b.dispatch=function(c,b){var d=0,f=c.isInternal,g=c.eventName.split(",");a.log.addLog('Dispatching global event "'+c.eventName+'" with this event object',c);for(var k=0;k<g.length;k++){var m=g[k].split("."),r=1<m.length?m.shift():"socialize",p=m[0],m="on"+p.substring(0,1).toUpperCase()+p.substring(1),t=a.utils.object.clone(e[r+"_"+m]);t||(t=[]);m=a.utils.object.clone(c);m.isGlobal=!0;m.eventName=p;b&&b.source&&(m.source=b.source);b&&b.sourceData&&(m.sourceData=
b.sourceData);p=["component"];f||p.push("other");for(var q=0;q<p.length;q++)for(var v=p[q],u=0;u<t.length;u++){var x=t[u];if(x.type==v){var w=a.utils.object.clone(m);null==w.context&&null!=x.context&&(w.context=x.context);null==w.context&&delete w.context;"component"!=v&&(d++,a._.handleSpecialFields(w));try{x.handler(w)}catch(y){a.log.addLog('Error while trying to invoke "'+c.eventName+'" global event handler',y)}}}f||a.events._dispatchFromMaps(m,!0);t=window.GenesisExchange_Gigya;p=window.gigya_omniture_conf;
q=window.myOmnitureIntegrationFunc;f||"undefined"==typeof t||"undefined"==typeof p||"socialize"!=r||((new t(p)).processAction(m),"undefined"!=typeof q&&q(p,m))}return d};b.dispatchWhenHandlerAdded=function(a,b,l){"undefined"===typeof b&&(b={});var f=a.eventName.split("."),e=1<f.length?f.shift():"socialize",k=f[0];g(a,b,l,function(f){0==f&&(f="on"+k.substring(0,1).toUpperCase()+k.substring(1),f=e+"_"+f,d[f]||(d[f]=[]),d[f].push({eventObj:a,params:b,preProcess:l}))})};b.getEventsForOperation=function(a){var b=
[];-1!=a.toLowerCase().indexOf("login")?(this._activeNamespaces.socialize&&b.push("socialize.login"),this._activeNamespaces.accounts&&b.push("accounts.login")):-1!=a.toLowerCase().indexOf("addconnection")&&this._activeNamespaces.socialize&&b.push("socialize.connectionAdded");return b.join(",")}})(k.global||(k.global={}));k.addMap=function(b){a.defaultEventMaps.splice(0,0,b)};k.dispatchErrorFromResponse=function(b,g,e){g||(g={});var d=g;d.response&&(d=d.response);g={eventName:"error",status:d.status?
d.status:"FAIL",statusMessage:d.statusMessage?d.statusMessage:"General Server Error",errorMessage:d.errorMessage?d.errorMessage:"General Server Error",errorDetails:d.errorDetails?d.errorDetails:"",errorCode:d.errorCode?d.errorCode:500001,response:g};a.utils.object.add(g,e);a.events.dispatchForWidget(g,b)};k.dispatchInvalidParamError=function(a,g){var e={eventName:"error"};"undefined"==typeof a[g]||null==a[g]?(e.errorCode=400002,e.errorMessage="Missing_required_parameter ("+g+")"):(e.errorCode=400006,
e.errorMessage="Invalid_parameter_value ("+g+")");e.status=e.errorCode;e.statusMessage=e.errorMessage;this.dispatchForWidget(e,a)};k.dispatchForWidget=function(b,g){if(b&&b.eventName){var e=b.eventName;a.log.addLog('Dispatching widget event "'+e+'" for '+g.lastSource+" with this event object",b);var d="on"+e.substring(0,1).toUpperCase()+e.substring(1);a._.handleSpecialFields(b);for(var c=b.eventName.split(","),h,l=0;l<c.length;l++){e=c[l];d="on"+e.substring(0,1).toUpperCase()+e.substring(1);g.context&&
(b.context=g.context);g&&g.source&&(b.source=g.source);g&&g.sourceData&&(b.sourceData=g.sourceData);g&&g.containerID&&(b.sourceContainerID=g.containerID);try{"function"==typeof g[d]&&(h=g[d](b))}catch(f){}if(-1==e.indexOf("login")&&-1==e.indexOf("logout")&&"connectionRemoved"!=e&&"connectionAdded"!=e){this._dispatchFromMaps(b);var e=window.GenesisExchange_Gigya,d=window.gigya_omniture_conf,k=window.myOmnitureIntegrationFunc;"undefined"!=typeof e&&"undefined"!=typeof d&&((new e(d)).processAction(b),
"undefined"!=typeof k&&k(d,b))}}if(null!=h)return h}};k._dispatchFromMaps=function(b,g){for(var e=[],d=!1,c=0;c<a.defaultEventMaps.length;c++){for(var h=a.defaultEventMaps[c].eventMap,l=a.defaultEventMaps[c].defaultMethod,f=0;f<h.length;f++){var k=h[f],n=[];k.args||(k.args=[]);for(var m=0;m<k.args.length;m++)"$event"==k.args[m]?n.push(b):n.push(a.utils.templates.fill(k.args[m],b));k.events.split(",");m=","+k.events.toLowerCase()+",";-1==m.indexOf(",*,")&&(-1==m.indexOf(",on"+b.eventName.toLowerCase()+
",")&&-1==m.indexOf(","+b.eventName.toLowerCase()+",")||(b.source||k.sources)&&k.sources&&-1==k.sources.indexOf(b.source))||(e.push(k),(k.method?k.method:l).apply(this,n),k.override&&(d=!0))}if(d)break}}})(a.events||(a.events={}))})(gigya||(gigya={}));var __extends=this.__extends||function(a,k){function b(){this.constructor=a}for(var g in k)k.hasOwnProperty(g)&&(a[g]=k[g]);b.prototype=k.prototype;a.prototype=new b};
(function(a){(function(k){k.apiAdapter;var b=function(b){function e(a,c,h,l,f,e){"undefined"===typeof l&&(l={});"undefined"===typeof f&&(f={});b.call(this,a,l);this.schema=c;this.requiresSession=h;this.settings=l;this.adapterSettings=f;this.altSessionParams=e;f.requiresSession=h}__extends(e,b);e.prototype.run=function(d){var c=this,h=function(){b.prototype.run.call(c,d);(new a._.ServerApiRequest(c,d)).start()};d.ignoreApiQueue?h():a.utils.queue.queueForExecution("API",function(){h()})};return e}(a._.BaseApi);
k.ServerApi=b})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(k){function b(){return a.utils.object.clone({status:"OK",statusMessage:"",errorCode:0,statusCode:0,errorMessage:"",errorDetails:"",statusReason:""})}var g;a.events.global.add("onFBCRefreshed",function(){g=!1},"component");var e=function(){function d(c,b){this.api=c;this.params=a.utils.object.clone(b);this.originalParams=a.utils.object.clone(b);this.callback=b.callback}d.prototype.start=function(){var c=this;a._.apiAdapter.isSessionValid(this.params,function(b){!c.api.adapterSettings.requiresSession||
b||c.doesHaveAltSessionParam()?c.sendRequest(b):c.afterServerApiResponse(a.utils.object.clone({status:"FAIL",errorMessage:"Unauthorized user",statusMessage:"Unauthorized user",errorCode:403005}),!1)})};d.prototype.sendRequest=function(c){var b=this,d=a.utils.object.merge([this.api.adapterSettings,{cacheTimeout:this.params.cacheTimeout}]);this.beforeRequest(c,function(f){f?b.afterServerApiResponse(f,c):(a.events.global.dispatch({eventName:"beforeRequest",methodName:b.api.methodName,rawParams:b.originalParams,
params:b.params},b.originalParams),b.api.settings.oauth?a._.apiAdapter.sendOauthRequest(b.api.methodName,b.params,function(a){b.afterServerApiResponse(a,c)},d):a._.apiAdapter.sendRequest(b.api.methodName,b.params,function(a){b.afterServerApiResponse(a,c)},d))})};d.prototype.beforeRequest=function(c,h){var d=this;a.external.backplane.isLoaded()&&!a.external.backplane._ready&&a._.loginMethods[this.api.methodName]?a.external.backplane.executeOnInit(function(){d.beforeRequest(c,h)}):(-1!=this.api.methodName.indexOf(".logout")&&
(!c&&!this.params.regToken||a.partnerSettings.ssoLogoutUrl&&document.location.href==a.partnerSettings.ssoLogoutUrl)&&h(b()),this.handleDeprecatedParams(),this.handleCollections(),this.handleConnectWithoutLoginBehavior(c),this.params.extraPermissions=this.params[this.params.provider+"ExtraPermissions"]||this.params.permissions,this.api.preprocessRequest(this.params,function(){d.setOverridableParams(function(){d.setNonOverridableParams(c,function(){d.filterParams(d.params);a.log.logCall(d.api.methodName,
d.originalParams,d.originalParams.lastSource);h()})})}))};d.prototype.setOverridableParams=function(c){a.utils.object.merge([{},this.params]);c()};d.prototype.doesHaveAltSessionParam=function(){if(this.api.altSessionParams){for(var a=this.api.altSessionParams.split("|"),b=0;b<a.length;b++)if(this.params[a[b]])return!0;return!1}};d.prototype.setNonOverridableParams=function(c,b){if(null!=this.params.APIKey){var d=a.utils.cookie.get("gltexp_"+this.params.APIKey);null!=d&&(this.params.loginTokenExp=
d)}(d=a.utils.cookie.get("_gigRefUid_"+this.params.APIKey))&&(c||a._.loginMethods[this.api.methodName])&&(this.params.refUID=d);if(a.providersConfig.facebook&&!g){var d=a.external.facebook.getParams(),f;for(f in d)this.params[f]=d[f];g=!0}0==this.api.methodName.indexOf("accounts.")&&(a.events.global._activeNamespaces.socialize&&null==this.params.includeUserInfo&&(this.params.includeUserInfo=!0),this.params.include=this.params.include?this.params.include+",":"profile,data");"accounts.getSchema"==this.api.methodName&&
(this.params.includeDynamicSchema="clientOnly");(f=a.external.backplane.getChannelId())&&(this.params.bp_channel_url=f);this.params.targetEnv="jssdk";b()};d.prototype.handleDeprecatedParams=function(){this.params.pendingRegistration?this.params.pending_registration=this.params.pendingRegistration:this.params.newUsersPendingRegistration&&(this.params.pending_registration=this.params.newUsersPendingRegistration);!0==this.params.alwaysForceAuthentication&&(this.params.forceAuthentication=!0);this.params.timestamp&&
(this.params.UIDTimestamp=this.params.timestamp,delete this.params.timestamp);this.params.signature&&0==this.api.methodName.indexOf("socialize.")&&(this.params.UIDSig=this.params.signature,delete this.params.signature);this.params.nonce&&(this.params.UIDNonce=this.params.nonce,delete this.params.nonce);this.params.format&&!this.params.dataFormat&&(this.params.dataFormat=this.params.format,delete this.params.format)};d.prototype.handleCollections=function(){this.params.recipients&&(this.params.recipients=
this.extractListOfGIGUIDs(this.params.recipients));if(this.params.friends){var a=this.extractListOfGIGUIDs(this.params.friends);0<this.params.UIDs.length&&(this.params.UIDs+=",");this.params.UIDs+=a}};d.prototype.extractListOfGIGUIDs=function(c){var b=this;switch(typeof c){case "string":return c;case "object":if("undefined"!=typeof c.UID)return c.UID;if(c instanceof a.socialize.Collection){var d=[];c.each(function(a,c){var e=b.extractListOfGIGUIDs(a);null!=e&&""!=e&&d.push(e)});return d.join(",")}}};
d.prototype.handleConnectWithoutLoginBehavior=function(c){if("socialize.addConnection"==this.api.methodName){var b=this.params.connectWithoutLoginBehavior;b&&(b=b.toLowerCase());"loginexistinguser"==b&&(this.params.loginIfExists=!0);c||(this.api=a._.getApi("socialize.login"),"alwayslogin"!=b&&(this.params.temporary_account=!0))}};d.prototype.filterParams=function(c){this.params=a.utils.object.extractProperties(c,{},this.getFullSchema())};d.prototype.getFullSchema=function(){if(null==this.api.schema)return"";
for(var c=(this.api.schema+"|"+a._.defaultApiSchema).split("|"),b=0;b<c.length;b++){var d=c[b];if(-1!=d.toLowerCase().indexOf("[providercapability=")){for(var f=d.toLowerCase().split("=")[1].split("]")[0],d=d.split("]")[1],f=a.socialize.getProvidersForRequiredCapabilities(a.socialize.getProvidersByName("*"),[f]),e=[],g=0;g<f.length;g++)e.push(f[g].name+d);c[b]=e.join("|")}}return c.join("|")};d.prototype.preprocessServerResponse=function(c){c.userInfo&&0!=this.api.methodName.indexOf("accounts.")&&
("string"==typeof c.userInfo&&(c.userInfo=a.utils.JSON.deserialize(c.userInfo)),c.userInfo&&(c=a.utils.object.merge([c.userInfo,c]),c.errorCode=c.userInfo.errorCode,delete c.userInfo));c.accountInfo&&"string"==typeof c.accountInfo&&(c.accountInfo=a.utils.JSON.deserialize(c.accountInfo),c.accountInfo&&(c=a.utils.object.merge([c.accountInfo,c]),delete c.accountInfo));try{c.settings&&"string"==typeof c.settings&&(c.settings=a.utils.JSON.deserialize(c.settings))}catch(b){}return c};d.prototype.onAfterLogoutMethod=
function(){a.external.backplane.resetChannel()};d.prototype.getExpiredSessionResponse=function(c){switch(this.api.methodName){case "socialize.setUserSettings":this.originalParams.disableLocalSettings||(a._.setGigyaSettings(this.params.group,this.params.settings),c=b());break;case "socialize.delUserSettings":this.originalParams.disableLocalSettings||(a._.delGigyaSettings(this.params.group,this.params.settings),c=b());break;case "socialize.getUserSettings":if(!this.originalParams.disableLocalSettings){var d=
a._.getGigyaSettings(this.params.group);c=b();c.settings=d}break;case "socialize.getUserInfo":c.status="OK";c.statusMessage="";c.errorCode=0;c.statusCode=0;c.errorMessage="";c.errorDetails="";c.statusReason="";break;case "accounts.logout":case "socialize.logout":c=b()}return c};d.prototype.afterServerApiResponse=function(c,b){var d=this;a._.checkCompleteRegistration(c,this.originalParams,function(f,e,g){c=f;c=d.preprocessServerResponse(c);if(a._.logoutMethods[d.api.methodName]&&0==c.errorCode)d.onAfterLogoutMethod();
403005==c.errorCode&&(c=d.getExpiredSessionResponse(c));0==c.errorCode&&(b||a._.loginMethods[d.api.methodName])&&a.utils.cookie.remove("_gigRefUid_"+d.originalParams.APIKey);d.handleMethodResponse(c,function(f){c=f;d.addDefaultResponseProperties(c);a._.handleSpecialFields(c);d.logoutFromProvidersIfNeeded(c,function(){e||d.generateEventsFromResponse(c,b);g?d.sendRequest(b):(a.events.global.dispatch({eventName:"afterResponse",methodName:d.api.methodName,filteredParams:d.params,response:c},d.originalParams),
"function"==typeof d.callback&&(a.log.addLog("Calling callback for "+d.api.methodName+" with this response object",c),d.callback(c)),d.api.settings.postprocessor&&d.api.settings.postprocessor(d.originalParams,c))})})})};d.prototype.addDefaultResponseProperties=function(a){delete a.statusCode;delete a.statusReason;a.errorCode=a.errorCode||0;a.status=a.status||(0==a.errorCode?"OK":"FAIL");a.errorMessage=a.errorMessage||"";a.statusMessage=a.statusMessage||a.errorMessage;a.requestParams=this.originalParams;
a.requestParams.password&&delete a.requestParams.password;a.context=this.originalParams.context;var b=this.api.methodName.split(".")[0];a.operation="socialize"==b?this.api.methodName.split(".")[1]:"/"+this.api.methodName};d.prototype.handleMethodResponse=function(b,d){if(0==b.errorCode)switch(this.api.methodName){case "socialize.postComment":if(b.comment)try{b.comment=a.utils.JSON.deserialize(b.comment)}catch(e){}break;case "gm.getTopUsers":if(a.localInfo.isIE)for(var f=0;f<b.users.length;f++){var g=
b.users[f];g.photoURL&&-1!=g.photoURL.indexOf("apis.live.net")&&(g.photoURL=g.photoURL.replace("https://apis.live.net",document.location.protocol+"//msnproxy.gigya.com"))}break;case "accounts.socialLogin":case "socialize.login":b.newUser=b.x_newUser?!0:!1,delete b.x_newUser;case "socialize.notifyLogin":case "socialize.addConnection":case "accounts.linkAccounts":case "accounts.finalizeRegistration":case "accounts.login":case "accounts.register":case "socialize.getUserInfo":delete b.login_token;delete b.expires_in;
delete b.id;b.code&&(b.authCode=b.code,delete b.code);b.authCode||"socialize.notifyLogin"==this.api.methodName&&this.params.authCode||(f=b,b.userInfo&&(f=b.userInfo,delete b.userInfo),-1==this.api.methodName.indexOf("accounts.")?(b={user:f},a.utils.object.extractProperties(f,b,"status|statusMessage|callId|errorCode|errorMessage|errorDetails|settings|context|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data|newUser"),b.user.hasOwnProperty("UIDSig")&&(b.signature=b.user.UIDSig),f.profile&&
delete f.profile,f.data&&delete f.data,delete f.status,delete f.statusMessage,delete f.callId,delete f.errorCode,delete f.errorMessage,delete f.errorDetails,delete f.settings,delete f.context):b!=f&&(b.user=f),""==f.age||isNaN(parseInt(f.age))||(f.age=parseInt(f.age)),f.suppressEvents&&(b.suppressEvents=!0),"string"==typeof f.capabilities&&((g=f.capabilities)||(g=""),"object"!=typeof f.capabilities&&(f.capabilities={}),g=g.toLowerCase(),f.capabilities={actions:-1<g.indexOf("actions"),friends:-1<g.indexOf("friends"),
login:-1<g.indexOf("login"),status:-1<g.indexOf("status"),notifications:-1<g.indexOf("notifications"),contacts:-1<g.indexOf("contacts"),photos:-1<g.indexOf("photos")}),a._.convertIdentitiesArrayToObject(f),"string"==typeof f.providers&&(f.providers=f.providers.split(",")),this.params.group&&!b.settings&&(f=a._.getGigyaSettings(this.params.group),b.settings=f));break;case "socialize.getAvailableProviders":g={};for(f=0;f<b.availableProviders.length;f++)g[b.availableProviders[f].name]=b.availableProviders[f];
b.availableProviders=g}"socialize.removeConnection"==this.api.methodName&&0==b.errorCode?a.socialize.getUserInfo(this.originalParams,{callback:function(a){d(a)}}):d(b)};d.prototype.logoutFromProvidersIfNeeded=function(b,d){var e;b.connectedProviders?e=b.connectedProviders.toLowerCase():b.provider&&(e=b.provider.toLowerCase());if(a._.logoutMethods[this.api.methodName]&&e&&!a.utils.validation.isExplicitFalse(this.originalParams.forceProvidersLogout)){var f=e.split(","),g=0,k=!1,m=function(){k||d();
k=!0};window.setTimeout(m,5E3);for(e=0;e<f.length;e++)this.logoutFromProvider(f[e],function(){g++;g==f.length&&m()})}else d()};d.prototype.logoutFromProvider=function(b,d){var e="",f=!1,g=!0;switch(b){case "facebook":if(a.providersConfig.facebook){a.socialize.waitForService({service:"facebook",callback:function(){a.external.facebook.isLoggedIn&&FB.logout?FB.logout(function(){a.external.facebook.refreshSession();d()}):d()}});return}break;case "yahoo":e="https://login.yahoo.com/config/login?.src=fpctx&amp;logout=1&r=";
break;case "google":e="https"==a.thisScript.protocol?"https://google.com/accounts/Logout?r=1":"https://www.google.com/accounts/Logout?r=",f=!0}0==b.indexOf("saml-")&&(e=b.substring(5),e="https://"+(a.partnerSettings.customAPIDomainPrefix?a.partnerSettings.customAPIDomainPrefix+"."+a.partnerSettings.baseDomain:"fidm."+a.partnerSettings.plugins.apiDomain)+"/saml/v2.0/"+this.params.APIKey+"/sp/jsslo?name="+encodeURIComponent(e),f=!0,g=!1);if(e){g&&(e+=(new Date).getTime());var k;if(f){var m=document.createElement("iframe");
m.style.width="30px";m.style.height="10px";m.style.position="absolute";m.style.top="-1000px";m.style.left="-1000px";k=function(a){var b;b=a&&a.srcElement?a.srcElement:a&&a.target?a.target:this;!b.loaded&&b.parentNode&&(b.loaded=!0,d(),window.setTimeout(function(){try{document.body.removeChild(b)}catch(a){}},5E3))};m.addEventListener?(m.addEventListener("load",k,!1),m.addEventListener("error",k,!1)):m.attachEvent&&(m.attachEvent("onload",k),m.attachEvent("onerror",k),m.onerror=m.onload=m.onreadystatechange=
function(a){m.readyState&&"loaded"!=m.readyState&&"complete"!=m.readyState||k(a)},m.onerror=k);m.src=e;a.utils.DOM.appendToBody(m)}else f=new Image,k=function(){this.loaded||(this.loaded=!0,d())},f.onload=k,f.onerror=k,f.src=e}else d()};d.prototype.generateEventsFromResponse=function(b,d){var e=this,f;if(0==b.errorCode)switch(this.api.methodName){case "accounts.logout":case "socialize.logout":case "socialize.unlinkAccounts":case "socialize.deleteAccount":f={eventName:"logout,accounts.logout"};break;
case "socialize.linkAccounts":case "socialize.setUID":a._.addUserInfoToEvent(b,f,!0);break;case "socialize.removeConnection":f={eventName:"connectionRemoved,disconnect",provider:this.params.provider||""};a._.addUserInfoToEvent(b,f);break;case "socialize.addConnection":!d&&b.user.isLoggedIn?(f={eventName:"login",provider:this.params.provider},a._.addUserInfoToEvent(b,f,!0)):(f={eventName:"connectionAdded,connect",provider:this.params.provider},a._.addUserInfoToEvent(b,f));break;case "accounts.linkAccounts":case "accounts.finalizeRegistration":case "accounts.login":case "accounts.register":case "accounts.socialLogin":this.dispatchAccountsLoginEvent(b);
case "socialize.finalizeRegistration":case "socialize.register":case "socialize.login":if(!b.user&&!b.authCode)break;f={eventName:"login"};var g=this.params.provider;if(!g&&b.providerSessions)for(var k in b.providerSessions){g=k;break}f.provider=g||"site";b.authCode&&(f.authCode=b.authCode);a._.addUserInfoToEvent(b,f,!0);b.user&&g&&(g=g.toLowerCase(),a.utils.cookie.set("_gig_llp",g),a.utils.cookie.set("_gig_llu",b.user.firstName||""));break;case "socialize.notifyLogin":this.params.authCode||(f||(f=
{eventName:"login"}),f.provider="site",a._.addUserInfoToEvent(b,f,!0));break;case "gm.notifyAction":a.events.global.dispatch({eventName:"actionNotified",isInternal:!0})}a._.loginMethods[this.api.methodName]&&this.originalParams.redirectURL&&f&&f.user&&0==b.errorCode&&a.utils.redirect(this.originalParams.redirectURL,[f,f.user],this.originalParams.redirectMethod);0==b.errorCode&&f&&"login"==f.eventName&&!b.profile&&a.events.global._activeNamespaces.accounts&&-1==this.api.methodName.indexOf("accounts")&&
a.accounts.getAccountInfo(this.originalParams,{include:"profile,data",includeUserInfo:!1,callback:function(a){e.dispatchAccountsLoginEvent(a)}});null!=f&&(f.context=this.originalParams.context,a.events.global.dispatch(f,this.originalParams))};d.prototype.dispatchAccountsLoginEvent=function(b){var d={eventName:"accounts.login",remember:a.utils.validation.isExplicitTrue(this.originalParams.remember),provider:this.originalParams.provider?this.originalParams.provider.toLowerCase():""};a.utils.object.extractProperties(b,
d,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data");a.events.global.dispatch(d,this.originalParams)};return d}();k.ServerApiRequest=e})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(k){var b={showReactionsBarUI:["barID"],showCommentsUI:["categoryID","streamID"],showFeedUI:["feedID"],showChatUI:["configID","streamID","chatID"]},g=function(e){function d(a,b,d,f,g,k){"undefined"===typeof d&&(d={});"undefined"===typeof f&&(f={});"undefined"===typeof g&&(g="");"undefined"===typeof k&&(k={});e.call(this,k.apiName||b.split(".")[0]+"."+a,k);this.methodName=a;this.jsName=b;this.settings=k;k.defaultParams=d||{};k.defaultPopupParams=f||{};k.requiredParams=g||""}__extends(d,
e);d.prototype.run=function(b){var d=this;!this.settings.waitForAPIQueue||b.ignoreApiQueue?this.startUI(b):a.utils.queue.queueForExecution("API",function(){d.startUI(b)})};d.prototype.startUI=function(b){var d=this;e.prototype.run.call(this,b);b=a.utils.object.clone(b);this.prepareParameters(b);this.preprocessRequest(b,function(){d.getPluginJsUrl(b);var e=b.containerID;if(d.settings.ignoreContainerId)e=b.containerID="";else if(null==b.containerID&&!d.settings.allowPopup||b.containerID&&!document.getElementById(b.containerID)){a.events.dispatchInvalidParamError(b,
"containerID");return}b.source?b.isPopup=!1:d.setSourceData(b);var f=d.settings.allowPopup&&(!e||b.isPopup);f&&d.settings.useNewModal&&(b.useNewModal=!0);d.setDefaultParams(b);d.settings.allowPopup||f||a.utils.DOM.clearByID(e);if(d.validateRequiredParams(b)){d.settings.dontLoadPluginsCore||d.loadPluginsCore();d.executeWhenJSLoaded(b,null);var g=function(){d.prepareContainer(b,f,function(){d.startPlugin(b)})};a.utils.queue.queueForExecution("UI",function(){!1==b.waitForDebug?g():a.utils.queue.queueForExecution("debug",
g)})}})};d.prototype.startPlugin=function(b){var d=this;this.executeWhenJSLoaded(b,function(){a.events.global.dispatch({eventName:"beforePluginReqwuest",methodName:d.methodName,params:b},b);a.log.logCall(d.methodName,b);a.reports.reportLoad(d.methodName,b);a.utils.functions.callFunction("gigya."+d.jsName+"."+d.methodName,[b,b,b])})};d.prototype.executeWhenJSLoaded=function(b,d){this.wasJSLoaded(b)?d&&d():a.utils.script.load(this.getPluginJsUrl(b),null,d,!0)};d.prototype.wasJSLoaded=function(b){var d=
"gigya."+this.jsName+"."+this.methodName,e="gigya.services."+this.jsName+".js";try{var f=eval(d),g=a.i18n[e][b.lang]}catch(k){return!1}return"undefined"!=typeof f&&"undefined"!=typeof g};d.prototype.setSourceData=function(a){a.source="socialize.showSimpleShareUI"==this.methodName?"socialize.showShareUI":this.methodName;if(!a.sourceData&&b[this.methodName]){for(var d={},e,f=0;f<b[this.methodName].length;f++){var g=b[this.methodName][f];null!=a[g]&&(e=!0,d[g]=a[g])}e&&(a.sourceData=d)}a.pluginsStack||
(a.pluginsStack=[]);a.pluginsStack.push({source:this.methodName});a.lastSource=this.methodName};d.prototype.loadPluginsCore=function(){a.__pluginsCodeLoaded||(a.utils.queue.hold("pluginsJS","UI"),a.utils.script.load(a.thisScript.base+"/js/gigya.services.socialize.plugins.min.js",null,function(){a.utils.queue.release("pluginsJS","UI")},!0))};d.prototype.getPluginJsUrl=function(b){var d=a.thisScript.base+"/js/gigya.services."+this.jsName+".min.js";b.lang&&(d+="?lang="+b.lang);return d};d.prototype.validateRequiredParams=
function(b){for(var d=this.settings.requiredParams.split("|"),e=0;e<d.length;e++){var f=d[e];if(""!=f&&(null==b[f]||""==b[f]))return a.events.dispatchInvalidParamError(b,f),!1}return!0};d.prototype.setDefaultParams=function(a){var b=!a.containerID||a.isPopup,d;for(d in this.settings.defaultParams)null==a[d]&&(a[d]=b&&this.settings.defaultPopupParams[d]?this.settings.defaultPopupParams[d]:this.settings.defaultParams[d]);if(b)for(d in this.settings.defaultPopupParams)a[d]||(a[d]=this.settings.defaultParams[d])};
d.prototype.prepareParameters=function(b){for(var d in b)-1!=d.toLowerCase().indexOf("provider")&&"string"==typeof b[d]&&(b[d]=a._.providers.replaceProviderAliases(b[d]));b.lang||(b.lang=a.thisScript.lang.langCode)};d.prototype.prepareContainer=function(b,d,e){var f=this;if(document.body){var g=b.containerID;d&&(g=a.utils.DOM.getCenteredDivID(this.methodName),b.newPopup&&(g+=(new Date).getTime()),b.containerID=g,b.isPopup=!0,document.getElementById(g)||a.utils.DOM.createTopLevelDiv(g));var k=document.getElementById(g);
k||(a.events.dispatchInvalidParamError(b,"containerID"),e());var m=this.getPluginJsUrl(b),r=k.Reqs?k.Reqs:k.Reqs=[],p=r.length+"@"+m+"@"+g;b.rid=p;r[r.length]={rid:p,servicedBy:m,container:k,method:this.methodName,context:b.context,c:b,p:b,i:b,operation:this.methodName,isHTML:!0};if(k&&k.style){k.style.display="";k.style.visibility="";if(g=document.getElementById("gigya_ifr_"+g))g.style.display="",g.style.visibility="";b.useNewModal?this.prepareContainerModal(b,k,g):(null!=g&&(a.utils.DOM.setSize(g,
b.width,b.height,d),g.style.visibility="visible"),a.utils.DOM.setSize(k,b.width,b.height,d))}g=this.methodName.split(".").pop();k.setAttribute&&k.setAttribute("gigid",(b.source&&b.source!=g?b.source+"_":"")+g);e()}else window.setTimeout(function(){f.prepareContainer(b,d,e)},200)};d.prototype.prepareContainerModal=function(b,d,e){var f='<div class="gigya-w-modal-title" style="line-height: normal; font-family: arial; font-size: 16px; color: #fff; font-weight: bold; background-color: #034f7c; padding: 5px;"><span style=" display: inline-block; ">'+
(b.captionText?b.captionText:"")+"</span></div>";d.style.backgroundColor="#fff";d.style.border="1px solid #034f7c";d.style.borderRadius="3px";d.style.MozBorderRadius="3px";d.style.WebkitBorderRadius="3px";d.innerHTML='<div class="gigya-w-modal-content" style="display: block"><div class="gigya-w-modal-close" style="display: block; float: right; margin-top: 3px;"><a href="#" class="gigya-w-modal-close-button" style="display: block; color: #fff; font-size: 12px; font-weight: bold; padding: 3px 6px 0; text-decoration: none; text-shadow: 0 1px 0 #f4f4f4; font-family: arial;">X</a></div>'+
f+'<div class="gigya-w-modal-container" ></div></div>';var f=a.utils.DOM.getElementsByClass(d,"gigya-w-modal-container")[0],g=a.utils.DOM.getElementsByClass(d,"gigya-w-modal-close")[0],k=a.utils.DOM.getElementsByClass(d,"gigya-w-modal-title")[0];a.utils.DOM.addEventListener(g,"click",function(f){d.parentElement.removeChild(d);e.parentElement.removeChild(e);a.events.dispatchForWidget({eventName:"close"},b)});g=document.createElement("div");g.id=d.id+"_innerContainer";a.utils.DOM.setSize(g,b.width,
b.height,!1);b.containerID=g.id;f.appendChild(g);a.utils.DOM.setSize(d,b.width,b.height+k.offsetHeight,!0);e.style.width=d.offsetWidth+"px";e.style.height=d.offsetHeight+"px";e.style.top=d.style.top.toString();e.style.left=d.style.left.toString();e.style.visibility="visible"};return d}(a._.BaseApi);k.UiApi=g})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(k){(function(b){function g(b,d,c,h){d||(d="socialize");a[d]||(a[d]={});a[d].plugins||(a[d].plugins={});a[d].plugins[c]||(a[d].plugins[c]={instances:[]});var g=a[d].plugins[c];g[h]||(g[h]=function(a){a=new b(a,"gigya."+d+".plugins."+c+".instances["+g.instances.length+"]");g.instances.push(a)})}b.attachPlugin=g;a.utils.functions.createAlias("gigya.attachPlugin",g)})(k.UI||(k.UI={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(k){a.socialize.addEventHandlers=function(){for(var b=0;b<arguments.length-0;b++);var b=a.utils.object.merge([a.thisScript.globalConf,arguments]),c=b.namespace?b.namespace:"socialize",e;for(e in b)0==e.indexOf("on")&&a.events.global.add(e,b[e],b.listenerType,b.context,c);"function"==typeof b.callback&&b.callback({status:"OK",statusMessage:"",errorCode:0,errorMessage:"",operation:"addEventHandlers",context:b.context})};a.accounts.addEventHandlers=function(){for(var b=0;b<arguments.length-
0;b++);b=a.utils.object.merge([arguments,{namespace:"accounts"}]);a.socialize.addEventHandlers(b)};a.socialize.isLoggedIn=function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]);a.socialize.getUserInfo(b,{callback:function(c){var e=c.user,e={loggedIn:e?a.utils.validation.isExplicitTrue(e.isLoggedIn):!1};a.utils.object.extractProperties(c,e,"status|statusMessage|callId|errorCode|errorMessage|errorDetails|context");b.callback&&b.callback(e)}})};a.socialize.waitForService=function(){var b=
a.utils.object.merge([a.thisScript.globalConf,arguments]),c=b.service;if(c){var c=c.toLowerCase(),e=b.callback;if("fbconnect"==c||"facebook"==c)a.external.facebook.isLoaded()?e({context:b.context}):a.socialize.addEventHandlers({listenerType:"component"},{onFacebookLoaded:e,context:b.context});"googleplus"==c&&(a.external.googlePlus.isLoaded()?e({context:b.context}):a.socialize.addEventHandlers({listenerType:"component"},{onGooglePlusLoaded:e,context:b.context}))}};var b={facebook:{w:640,h:370},twitter:{w:880,
h:585},messenger:{w:710,h:905},linkedin:{w:560,h:500},yahoobookmarks:{w:840,h:975},digg:{w:1010,h:1045},delicious:{w:890,h:905},googlebookmarks:{w:710,h:905},mixi:{w:640,h:470},googleplus:{w:496,h:420}};a.socialize.postBookmark=function(){var d=a.utils.object.merge([a.thisScript.globalConf,arguments]);d.APIKey||(d.APIKey=a.thisScript.APIKey);var c={};a.utils.object.extractProperties([d],c,a._.postBookmarkSchema);c.sdk="js_"+a.build.version;if(!c.URL&&!c.url&&c.userAction&&!c.userAction.linkBack)for(var e=
document.getElementsByTagName("meta"),g=0;g<e.length;g++)if("og:url"==e[g].getAttribute("property")&&e[g].getAttribute("content")){c.URL=e[g].getAttribute("content");break}c.URL||c.url||!c.userAction||c.userAction.linkBack||(c.URL=document.location.href);delete c.context;c.provider||(c.provider="");c.providerKey||"facebook"==c.provider.toLowerCase()&&(c.providerKey=a.external.opengraph.getMetaTag("fb:app_id"));a._.apiAdapter.getGmidTicket(function(e){e&&(c.gmidTicket=e);e=a.utils.keyValue.serialize(c);
var h=b[c.provider.toLowerCase()],g=d.enablePopupLocation?"location=1,toolbar=1":null;h&&h.w&&h.h&&(g=(d.enablePopupLocation?"location=1,toolbar=1,":"toolbar=0,")+"menubar=0,resizable=1,scrollbars=1,width="+h.w+",height="+h.h);a.log.logCall("postBookmark",c);a.utils.win.open(a.utils.stringUtils.format("https://socialize.{0}/gs/bookmark.aspx?{1}",a.partnerSettings.plugins.apiDomain,e),"gs_bookmark_"+c.provider,g)})};a.socialize.refreshUI=function(){var b=a.utils.object.merge([a.thisScript.globalConf,
arguments]),c=b.callback;a.socialize.getUserInfo(b,{callback:function(e){var g={eventName:"login",isInternal:!0};b.provider&&(g.provider=b.provider);a._.addUserInfoToEvent(e,g,!0);b.context&&(g.context=b.context);a.events.global.dispatch(g);"function"==typeof c&&c(e)}})};var g={"digg.com":"digg","stumbleupon.com":"stumbleupon","delicious.com":"delicious","technorati.com":"technorati","t.co":"twitter","plus.url.google.com":"googlePlus","facebook.com":"facebook","linkedin.com":"linkedIn","pinterest.com":"pinterest"},
e;a.socialize.trackReferrals=function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]),c={},h={};-1!=document.location.href.indexOf("#")&&(h=a.utils.keyValue.deserialize(document.location.href.split("#")[1]));-1!=document.location.href.indexOf("?")&&(c=a.utils.keyValue.deserialize(document.location.href.split("?")[1].split("#")[0]));h.guid&&"_"!=h.guid&&a.utils.cookie.set("_gigRefUid_"+b.APIKey,h.guid);var k=h._giguuid||c._giguuid;k&&a.utils.cookie.set("_gigRefUid_"+b.APIKey,k);if(null==
h._gus&&null==c._gus){if(!e){var f,h={url:document.location.href,ref:document.referrer};c.fb_ref?(f=a.utils.keyValue.deserialize(c.fb_ref,":"),h.uuid=f.uu,h.sn=f.p,f=f.s):document.referrer&&-1!=document.referrer.indexOf("://")&&(c=document.referrer.split("://")[1].split("/")[0],0==c.indexOf("www.")&&(c=c.split("www.")[1]),g[c]&&(h.sn=g[c]));h.sn||document.referrer&&(-1!=document.referrer.indexOf("http://soc.li")||-1!=document.referrer.indexOf("https://shr.gs"))||(c=document.location.href.split("#guid="),
1<c.length&&(c=c[1].split("#")[0].split("&")[0],c!=a._.apiAdapter.getTokenParam(b.APIKey,"UUID")&&(h.sn="AddressBarShares",h.uuid=c,"_"==c&&delete h.uuid,document.location.replace("#"),a.reports.trackAddressBarShares(),h.url=document.location.href.split("#")[0])));h.uuid&&a.utils.cookie.set("_gigRefUid_"+b.APIKey,h.uuid);h.sn&&a.reports.report("linkback",b.APIKey,b.cid,f,null,h);e=!0}"function"==typeof b.callback&&b.callback({status:"OK",statusMessage:"",operation:"trackReferrals",context:b.context,
errorMessage:"",errorCode:0})}};a.socialize.hideUI=function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]);"function"==typeof b.callback&&b.callback({status:"OK",statusMessage:"",operation:"hideUI",context:b.context,errorMessage:"",errorCode:0})};a.gcs.submitUserForm=function(){var b={},c=a.utils.object.merge([a.thisScript.globalConf,arguments]),e=document.getElementById(c.form);if(!e){var g=document.getElementsByName(c.form);g&&0<g.length&&(c.form=g[0])}for(g=0;g<e.elements.length;g++){var f=
e.elements[g];if(f.name){for(var k=f.name.split("."),n=b,m=0;m<k.length-1;m++){var r=k[m];n[r]||(n[r]={});n=n[r]}n[k[k.length-1]]=f.value}}c.data=b;a.gcs.setUserData(c)};a.socialize.getProviderShareCounts=function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]);a.utils.script.load(a.thisScript.base+"/js/gigya.services.socialize.plugins.shareCounts.min.js",null,function(){a.socialize.plugins.shareCounts.getProviderShareCounts(b)},!0)}})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(k){k.defaultApiSchema="ctag|APIKey|cid|oauth_token|source|sourceData|usePost|refUID|fb_UID|fb_at|fb_exp";k.defaultOauthSchema="ctag|temporary_account|authFlow|connectWithoutLogin|provider|redirectMethod|redirect_uri|pendingRegistration|lang|regSource|extraPermissions|sessionExpiration|forceAuthentication|includeiRank|includeAllIdentities|extraFields|enabledProviders|disabledProviders|signIDs|openIDUsername|openIDURL|openIDProviderLogo|openIDProviderName|finalizeRegistration|include|actionAttributes|profileAttributes|googlePlayAppID|bp_channel_url|loginIfExists|includeUserInfo|redirectURL|authCodeOnly|enablePopupLocation|invite";
k.postBookmarkSchema="provider|URL|url|title|description|target|cid|APIKey|shortURLs|source|sourceData|providerKey|thumbnailURL|tags|userAction|[providerCapability=actions]UserAction|actionAttributes";k.loginMethods={"socialize.login":1,"socialize.addConnection":1,"socialize.notifyLogin":1,"socialize.linkAccounts":1,"accounts.login":1,"accounts.socialLogin":1,"accounts.linkAccounts":1,"accounts.register":1,"accounts.finalizeRegistration":1};k.logoutMethods={"socialize.logout":1,"accounts.logout":1,
"socialize.deleteAccount":1,"socialize.unlinkAccounts":1};k.arApiList=[new a._.ServerApi("socialize.login",k.defaultOauthSchema,!1,{oauth:!0},{clearSession:!0,forceHttps:!0}),new a._.ServerApi("socialize.addConnection",k.defaultOauthSchema,!1,{oauth:!0},{forceHttps:!0}),new a._.ServerApi("socialize.requestPermissions",k.defaultOauthSchema,!1,{oauth:!0},{requiresSession:!0}),new a._.ServerApi("accounts.socialLogin",k.defaultOauthSchema,!1,{oauth:!0},{clearSession:!0,forceHttps:!0}),new a._.UiApi("showDebugUI",
"socialize.plugins.debug",{},{},"",{allowPopup:!0}),new a._.UiApi("showRatingUI","comments.plugins.rating",{showReadReviewsLink:!0,showCommentButton:!0,includeRatingsDims:!0}),new a._.UiApi("showCommentsUI","comments.plugins.comments",{width:500},{},"",{preprocessor:function(b,g){2!=b.version&&(b.ctag="comments_v1");2==b.version&&a.utils.browser.isModern()?a.comments.showCommentsUI2(b):g()}}),new a._.UiApi("showCommentsUI","comments.plugins.comments2",{width:500},{},"",{apiName:"comments.showCommentsUI2"}),
new a._.UiApi("showShareUI","socialize.plugins.share",{width:520,height:320},{width:595,height:324},"userAction",{allowPopup:!0,preprocessor:function(b,g){var e=b.operationMode;e&&(e=e.toLowerCase().replace(/ /g,""));b.containerID||(delete b.width,delete b.height);a._.apiAdapter.isSessionValid(b,function(d){"simpleshare"==e||"autodetect"==e&&!d?a.socialize.showSimpleShareUI(b):g()})}}),new a._.UiApi("showLoginUI","socialize.plugins.login",{width:120,height:110},{width:280,height:220},"",{allowPopup:!0}),
new a._.UiApi("showLoginUI2","socialize.plugins.login2",{width:120,height:110,UIMode:"login"},{width:280,height:220,UIMode:"login"},"",{allowPopup:!0,useNewModal:!0}),new a._.UiApi("showAddConnectionsUI","socialize.plugins.login",{width:110,height:65},{width:250,height:200},"",{allowPopup:!0}),new a._.UiApi("showAddConnectionsUI2","socialize.plugins.login2",{width:110,height:65,UIMode:"addConnection"},{width:250,height:200,UIMode:"addConnection"},"",{allowPopup:!0,useNewModal:!0}),new a._.UiApi("showFriendSelectorUI",
"socialize.plugins.friendSelector",{width:400,height:360},{},"",{allowPopup:!0}),new a._.UiApi("showFeedUI","socialize.plugins.newsfeed",{width:304,height:265}),new a._.UiApi("showChatUI","chat.plugins.chat",{width:300,height:450},{},"",{preprocessor:function(a,g){a.site&&(a.categoryID=a.site);a.stream&&(a.streamID=a.stream);a.skin&&(a.skinID=a.skin);a.streamID=a.streamID||0;g()}}),new a._.UiApi("showEditConnectionsUI","socialize.plugins.edit",{width:310,height:250},{width:310,height:310},"",{allowPopup:!0}),
new a._.UiApi("showEditConnectionsUI2","socialize.plugins.editConnections2",{width:310,height:250,requiredCapabilities:"friends"},{width:310,height:310,requiredCapabilities:"friends"},"",{allowPopup:!0,useNewModal:!0}),new a._.UiApi("showShareBarUI","socialize.plugins.reactions",{shareCountCacheTimeout:3E5},{},"userAction|shareButtons"),new a._.UiApi("showReactionsBarUI","socialize.plugins.reactions",{},{},"userAction|barID|reactions",{preprocessor:function(a,g){a.barID||(a.barID=a.itemID);g()}}),
new a._.UiApi("showMiniShareUI","socialize.plugins.minishare",{width:320,height:153},{},"",{allowPopup:!0}),new a._.UiApi("showFollowBarUI","socialize.plugins.followbar",{},{},"buttons"),new a._.UiApi("showBookmarkUI","socialize.plugins.bookmark",{width:310,height:250},{width:310,height:310}),new a._.UiApi("showSimpleShareUI","socialize.plugins.simpleShare",{width:280,height:175},{},"userAction",{allowPopup:!0,dontLoadPluginsCore:!0,waitForAPIQueue:!0}),new a._.UiApi("showShareMobileUI","socialize.plugins.shareMobile",
{},{},"userAction",{allowPopup:!0}),new a._.UiApi("showUserStatusUI","gm.plugins.userStatus",{width:300,hidePoints:!1,hideActions:!1},{},"",{requireSession:!0}),new a._.UiApi("showAchievementsUI","gm.plugins.achievements",{width:300,height:100,excludeChallenges:"_default"}),new a._.UiApi("showChallengeStatusUI","gm.plugins.achievements",{width:300,height:100,challenge:"_default"}),new a._.UiApi("showLeaderboardUI","gm.plugins.leaderboard",{width:300},{},"",{preprocessor:function(a,g){a&&a.height&&
(a.height=null);g()}}),new a._.UiApi("showNotifications","gm.plugins.notifications",{},{},"",{preprocessor:function(b,g){var e=a.utils.localStorage.getObject("gmSettings");e&&e.disableNotifications||(b.containerID="gigNotifications",document.getElementById(b.containerID)||(e=document.createElement("div"),e.id=b.containerID,e.style.position="absolute",e.style.left="-1000px",a.utils.DOM.appendToBody(e)),g())}}),new a._.UiApi("showTfaUI","accounts.plugins.tfa",{width:325}),new a._.UiApi("showScreenSet",
"accounts.plugins.screenSet",{},{},"",{allowPopup:!0}),new a._.UiApi("hideScreenSet","accounts.plugins.screenSet",{},{},"",{allowPopup:!0}),new a._.UiApi("switchScreen","accounts.plugins.screenSet",{},{},"",{allowPopup:!0}),new a._.ServerApi("socialize.getAvailableProviders","enabledProviders|disabledProviders|requiredCapabilities"),new a._.ServerApi("socialize.notifyLogin","siteUID|UIDTimestamp|UIDSig|UIDNonce|provider|authToken|tokenSecret|regSource|tokenExpiration|sessionHandle|sessionHandleExpiration|userInfo|providerSessions|sessionExpiration|authCode|includeAllIdentitiesincludeiRank|group|settings|extraFields|signIDs|newUser|actionAttributes|profileAttributes|bp_channel_url",
!1,void 0,{forceHttps:!0,clearSession:!0}),new a._.ServerApi("socialize.shortenURL","URL"),new a._.ServerApi("socialize.convertAction","userAction|[providerCapability=actions]UserAction|provider"),new a._.ServerApi("socialize.getReactionsCount","barID|buttonIDs|reportLoad"),new a._.ServerApi("socialize.incrementReactionsCount","barID|buttonID|count|actionAttributes|profileAttributes"),new a._.ServerApi("socialize.deleteAccount",void 0,!0),new a._.ServerApi("socialize.delUserSettings","group|settings",
!0),new a._.ServerApi("socialize.getAlbums","type|enabledProviders|disabledProviders",!0),new a._.ServerApi("socialize.getContacts","enabledProviders|disabledProviders",!0),new a._.ServerApi("socialize.getFriendsInfo","enabledProviders|disabledProviders|detailLevel|UIDs|siteUsersOnly|requiredCapabilities|signIDs",!0),new a._.ServerApi("socialize.getPhotos","enabledProviders|disabledProviders|albumIDs|tags",!0),new a._.ServerApi("socialize.getRawData","provider|UID|fields|dataFormat",!0),new a._.ServerApi("socialize.getSessionInfo",
"provider|paddingMode|encrypt|signIDs|encryptAll",!0),new a._.ServerApi("socialize.getUserInfo","enabledProviders|disabledProviders|signIDs|includeiRank|includeAllIdentities|extraFields|group|settings|includeOpenidUID",!0),new a._.ServerApi("socialize.getUserSettings","group|settings|regToken",!0,void 0,{forceHttps:!0},"regToken"),new a._.ServerApi("socialize.getPlaces","enabledProviders|disabledProviders|latitude|longitude|query|radius|unifyResults",!0),new a._.ServerApi("socialize.checkin","enabledProviders|disabledProviders|placeID|comment|latitude|longitude|actionAttributes|profileAttributes",
!0),new a._.ServerApi("socialize.logout","signIDs",!0,{preprocessor:function(b,g){a.partnerSettings.ssoKey&&(b.signIDs=!0);g()}}),new a._.ServerApi("socialize.notifyRegistration","siteUID|UIDTimestamp|UIDSig",!0),new a._.ServerApi("socialize.publishUserAction","userAction|[providerCapability=actions]UserAction|enabledProviders|disabledProviders|target|shortURLs|scope|privacy|feedID|userLocation|tags|actionAttributes|profileAttributes",!0),new a._.ServerApi("socialize.removeConnection","provider|lastIdentityHandling",
!0),new a._.ServerApi("socialize.sendNotification","recipients|body|subject|shortURLs|actionAttributes|profileAttributes",!0),new a._.ServerApi("socialize.setStatus","shortURLs|status|[providerCapability=status]Status|enabledProviders|disabledProviders|userLocation|actionAttributes|profileAttributes",!0),new a._.ServerApi("socialize.setUID","siteUID|UIDTimestamp|UIDSig",!0),new a._.ServerApi("socialize.setUserSettings","group|settings|regToken",!0,void 0,{forceHttps:!0},"regToken"),new a._.ServerApi("socialize.unlinkAccounts",
void 0,!0),new a._.ServerApi("socialize.getFeed","feedID|startTS|endTS|groups|limit|includeUID"),new a._.ServerApi("socialize.sendEmail","dontSendEmail|companyName|lang|emails|emailSubject|emailBody|linkBack|senderEmail|senderName|userMsg|shortURLs|userAction|[providerCapability=actions]UserAction|actionAttributes|profileAttributes|captchaTicket",!1,void 0,{forceHttps:!0}),new a._.ServerApi("socialize.facebookGraphOperation","graphPath|graphParams|authRequired|method|authType"),new a._.ServerApi("socialize.getTopShares",
"age|tag|limit"),new a._.ServerApi("socialize.notifySSOLogin","bp_channel_url"),new a._.ServerApi("gm.getChallengeStatus","UID|includeChallenges|excludeChallenges|details|lang|actionAttributes|profileAttributes"),new a._.ServerApi("gm.resetLevelStatus","challenges|actionAttributes|profileAttributes",!0),new a._.ServerApi("gm.getTopUsers","challenge|totalCount|friendsCount|includeSelf|period|lang|actionAttributes|profileAttributes"),new a._.ServerApi("gm.getChallengeConfig","UID|includeChallenges|excludeChallenges|lang|actionAttributes|profileAttributes|expandActions"),
new a._.ServerApi("gm.notifyAction","action|operation|challengeIDs|actionAttributes|profileAttributes",!0),new a._.ServerApi("comments.postComment","categoryID|streamID|parentID|guestName|guestEmail|commentText|anonymous|mediaItems|privacy|feedID|userAction|[providerCapability=actions]UserAction|scope|enabledProviders|disabledProviders|shortURLs|commentTitle|ratings|tags|taggedUsers|streamTags|actionAttributes|profileAttributes"),new a._.ServerApi("comments.getComments","categoryID|streamID|includeSettings|start|startTS|threadLimit|sort|threaded|threadDepth|includeStreamInfo|includeOpenidUID|includeUID|includeReplies|tags|dataFormat|includeUserOptions|includeUserComments|includeRatingsDims"),
new a._.ServerApi("comments.setStreamInfo","categoryID|streamID|streamTitle|streamURL|streamInfoSig|streamTags"),new a._.ServerApi("comments.getTopStreams","categoryID|limit|maxStreamAge|includeLastComment|streamTag|minRatingsCount"),new a._.ServerApi("comments.getTopRatedStreams","categoryID|limit|maxStreamAge|ratingClass|minRatingsCount|streamTag"),new a._.ServerApi("comments.getStreamInfo","categoryID|streamID|streamIDs|includeLastComment|includeRatingsDims"),new a._.ServerApi("comments.flagComment",
"categoryID|streamID|commentID|actionAttributes|profileAttributes"),new a._.ServerApi("comments.vote","categoryID|streamID|commentID|vote|actionAttributes|profileAttributes",!0),new a._.ServerApi("comments.getUserVotes","categoryID|streamID",!0),new a._.ServerApi("comments.getUserComments","categoryID|streamID|tag|senderUID|start|limit|sort|includeReplies|includeStreamInfo",!0),new a._.ServerApi("comments.getFriendsComments","categoryID|streamID|start|limit|includeUID|sort|includeReplies|includeStreamInfo",
!0),new a._.ServerApi("comments.getThread","categoryID|streamID|commentID|start|includeUID|limit|threadDepth|sort"),new a._.ServerApi("comments.deleteComment","categoryID|streamID|commentID",!0),new a._.ServerApi("comments.getRelatedUsers","categoryID|streamID|parentCommentID|usernamePrefix|limit"),new a._.ServerApi("comments.analyzeMediaItem","categoryID|urls"),new a._.ServerApi("comments.subscribe","categoryID|streamID|email|lang"),new a._.ServerApi("comments.unsubscribe","categoryID|streamID|unsubscribeToken"),
new a._.ServerApi("comments.setUserOptions","replyNotifications|notificationsEmail|notificationsLanguage",!0),new a._.ServerApi("comments.getUserOptions","ServerApiKey",!0),new a._.ServerApi("gcs.getUserData","type|fields",!0),new a._.ServerApi("gcs.setUserData","data|type|updateBehavior",!0),new a._.ServerApi("gcs.search","expTime|querySig|query"),new a._.ServerApi("gcs.getSchema","schemaType"),new a._.ServerApi("chat.getSettings","categoryID|streamID|skinID"),new a._.ServerApi("chat.getMessages",
"categoryID|streamID|start|includeSettings"),new a._.ServerApi("chat.postMessage","categoryID|streamID|messageText|isPrivate|actionAttributes|profileAttributes",!0),new a._.ServerApi("chat.resetChat","categoryID|streamID|timestamp|chatSignature"),new a._.ServerApi("chat.blockUser","categoryID|streamID|UID|chatSignature"),new a._.ServerApi("chat.deleteMessage","categoryID|streamID|messageId|chatSignature"),new a._.ServerApi("accounts.login","loginID|password|sessionExpiration|targetEnv|regToken|include|actionAttributes|profileAttributes|includeUserInfo|includeDynamicSchema|bp_channel_url|captchaToken|captchaText",
!1,void 0,{clearSession:!0,forceHttps:!0,forcePost:!0}),new a._.ServerApi("accounts.linkAccounts","loginID|password|sessionExpiration|targetEnv|include|regToken|includeUserInfo|bp_channel_url",!1,void 0,{forceHttps:!0,forcePost:!0}),new a._.ServerApi("accounts.initRegistration","sdk",!1,void 0,{clearSession:!0}),new a._.ServerApi("accounts.register","username|email|password|UID|regToken|siteUID|secretQuestion|secretAnswer|regSource|profile|data|captchaText|captchaToken|lang|hashedPassword|pwHashAlgorithm|skipVerification|finalizeRegistration|targetEnv|sessionExpiration|include|actionAttributes|profileAttributes|includeUserInfo|bp_channel_url",
!1,void 0,{forceHttps:!0,forcePost:!0}),new a._.ServerApi("accounts.finalizeRegistration","regToken|targetEnv|include|includeUserInfo|bp_channel_url"),new a._.ServerApi("accounts.captchaImage","regToken"),new a._.ServerApi("accounts.importProfilePhoto","regToken|URL|publish"),new a._.ServerApi("accounts.resetPassword","lang|loginID|passwordResetToken|secretAnswer|securityFields|newPassword|email",!1,void 0,{forceHttps:!0,forcePost:!0}),new a._.ServerApi("accounts.isAvailableLoginID","loginID"),new a._.ServerApi("accounts.resendVerificationCode",
"regToken|email"),new a._.ServerApi("accounts.getCaptcha",""),new a._.ServerApi("accounts.getPolicies","sections"),new a._.ServerApi("accounts.getSchema","sections|schemaType"),new a._.ServerApi("accounts.getAccountInfo","include|extraProfileFields|regToken",!0,{},{},"regToken"),new a._.ServerApi("accounts.setAccountInfo","profile|data|regToken|oldPassword|password|newPassword|addLoginEmails|removeLoginEmails|username|secretQuestion|secretAnswer|requirePasswordChange",!1,void 0,{forceHttps:!0,forcePost:!0},
"regToken"),new a._.ServerApi("accounts.logout","signIDs",!0,{preprocessor:function(b,g){a.partnerSettings.ssoKey&&(b.signIDs=!0);g()}}),new a._.ServerApi("accounts.search","expTime|querySig|query"),new a._.ServerApi("accounts.getScreenSets","screenSetIDs|include"),new a._.ServerApi("accounts.incrementCounters","counters",!0,{preprocessor:function(a,g){var e=a.actionCounterPath,d=a.counters;if(e&&d)for(var c=0;c<d.length;c++){var h=d[c];"object"!=typeof h||h.path||(h.path=e)}g()}}),new a._.ServerApi("accounts.getCounters",
"counters",!0),new a._.ServerApi("accounts.tfa.getProviders","regToken",!0,{},{},"regToken"),new a._.ServerApi("accounts.tfa.initTFA","provider|mode|regToken",!1,{},{forceHttps:!0}),new a._.ServerApi("accounts.tfa.finalizeTFA","gigyaAssertion|providerAssertion|tempDevice|regToken",!0,{},{},"regToken"),new a._.ServerApi("accounts.tfa.deactivateProvider","provider",!0),new a._.ServerApi("accounts.tfa.unregisterDevice","allDevices",!0),new a._.ServerApi("accounts.tfa.phone.getRegisteredPhoneNumbers",
"gigyaAssertion",!1,{},{forceHttps:!0}),new a._.ServerApi("accounts.tfa.phone.removePhone","gigyaAssertion|phoneId",!1,{},{forceHttps:!0}),new a._.ServerApi("accounts.tfa.phone.sendVerificationCode","gigyaAssertion|lang|phoneID|phone|method",!1,{},{forceHttps:!0}),new a._.ServerApi("accounts.tfa.phone.completeVerification","gigyaAssertion|phvToken|code",!1,{},{forceHttps:!0}),new a._.ServerApi("ds.store","type|data|oid|updateBehavior"),new a._.ServerApi("ds.get","type|data|oid|fields"),new a._.ServerApi("ds.search",
"expTime|querySig|query"),new a._.ServerApi("ds.getSchema",""),new a._.ServerApi("ds.delete","type|oid|fields"),new a._.ServerApi("ids.getAccountInfo","include|extraProfileFields",!0),new a._.ServerApi("ids.setAccountInfo","profile|data|oldPassword|password|newPassword|addLoginEmails|removeLoginEmails|username|secretQuestion|secretAnswer|requirePasswordChange",!1,void 0,{forceHttps:!0,forcePost:!0}),new a._.ServerApi("ids.search","expTime|querySig|query"),new a._.ServerApi("gscounters.sendReport",
"reports|noAuth")];a.utils.functions.createAlias("gigya.socialize.showChatUI",a.chat.showChatUI);a.utils.functions.createAlias("gigya.socialize.showCommentsUI",a.comments.showCommentsUI);a.utils.functions.createAlias("gigya.socialize.showRatingUI",a.comments.showRatingUI);a.utils.functions.createAlias("gigya.services.socialize",a.socialize);a.utils.functions.createAlias("gigya.services.gcs",a.gcs);a.utils.functions.createAlias("gigya.services.gm",a.gm);a.utils.functions.createAlias("gigya.services.comments",
a.comments);a.utils.functions.createAlias("gigya.services.accounts",a.accounts);a.utils.functions.createAlias("gigya.socialize.connect",a.socialize.addConnection);a.utils.functions.createAlias("gigya.socialize.disconnect",a.socialize.removeConnection);a.utils.functions.createAlias("gigya.socialize.linkAccounts",a.socialize.setUID);a.utils.functions.createAlias("gigya.socialize.showConnectUI",a.socialize.showAddConnectionsUI);a.utils.functions.createAlias("gigya.socialize.showNewsfeedUI",a.socialize.showFeedUI);
a.utils.functions.createAlias("gigya.showDebugUI",a.socialize.showDebugUI)})(a._||(a._={}))})(gigya||(gigya={}));(function(a){a=a._||(a._={});a=a.apiAdapters||(a.apiAdapters={});a.a})(gigya||(gigya={}));
(function(a){(function(k){(function(b){function g(){if("undefined"!=typeof FB){var c=function(c){b.initializedTime=new Date;b.isConnected="connected"==c.status;b.isLoggedIn="unknown"!=c.status;a.events.global.dispatch({eventName:"FBCRefreshed"})};a.providersConfig.facebook.appID&&FB&&FB.getLoginStatus&&FB.getLoginStatus(c,!0)}}function e(){for(var a=d,b=0;b<a.length;b++)a[b]();d=[]}var d=[];b.initializedTime;b.isLoggedIn=!1;b.isConnected=!1;b.isLoaded=function(){return null!=b.initializedTime};b.load=
function(c){if(!b.initializedTime){b.initializedTime=null;window.setInterval(function(){a.external.facebook.refreshSession()},27E5);window.fbAsyncInit=function(){var d=a.utils.object.clone(a.thisScript.globalConf.facebookInitParams);d||(d={});a.providersConfig.facebook&&(d.appId=a.providersConfig.facebook.appID);d.status=!1;d.cookie=!0;d.xfbml=!0;d.oauth=!0;FB.init(d);!0!=c?FB.getLoginStatus(function(c){b.initializedTime=new Date;b.isConnected="connected"==c.status;b.isLoggedIn="unknown"!=c.status;
a.events.global.dispatch({eventName:"facebookLoaded",isLoggedIn:b.isLoggedIn,isConnected:b.isConnected});a.socialize.addEventHandlers({listenerType:"component"},{listenerDescription:"listener for updating Facebook Connect session",onLogin:function(){g()},onConnect:function(){g()},onLogout:function(){g()}})},!0):(b.initializedTime=new Date,a.events.global.dispatch({eventName:"facebookLoaded",isLoggedIn:b.isLoggedIn,isConnected:b.isConnected}))};var d=document.createElement("div");d.id="fb-root";a.utils.DOM.appendToBody(d);
a.utils.script.load(document.location.protocol+"//connect.facebook.net/"+a.thisScript.lang.full.replace("-","_")+"/all.js",null,function(){"none"==document.documentElement.style.display&&(document.documentElement.style.display="")},!0)}};b.refreshSession=g;b.retryPending=e;b.runWhenLoaded=function(a){d.push(a)};b.getParams=function(){var a={};if("undefined"!=typeof FB&&FB.getAuthResponse)try{var b=FB.getAuthResponse();b&&(null!=b.userID&&(a.fb_UID=b.userID),null!=b.accessToken&&(a.fb_at=b.accessToken),
null!=b.expiresIn&&(a.fb_exp=b.expiresIn))}catch(d){}return a};b.autoLogin=function(){a.socialize.waitForService({service:"facebook",callback:function(){a._.apiAdapter.isSessionValid(a.thisScript.globalConf,function(b){var d=a.external.facebook.getParams();!b&&d&&d.fb_at&&!a._.autoLoginInProgress&&(a._.autoLoginInProgress=!0,a.socialize.notifyLogin({providerSessions:{facebook:{authToken:d.fb_at,tokenExpiresIn:d.fb_exp}}}))})}})};a.events.global.add("facebookLoaded",e,"component");a.events.global.add("onFBCRefreshed",
e,"component")})(k.facebook||(k.facebook={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(k){(function(b){b.initializedTime;b.isLoaded=function(){return null!=b.initializedTime};b.load=function(){var g=this;if(!b.initializedTime&&a.providersConfig.googlePlus){b.initializedTime=null;var e=document.createElement("script");e.type="text/javascript";e.async=!0;window.__gigya_handleClientLoad=function(){return g.handleClientLoad()};e.src="https://apis.google.com/js/client.js?onload=__gigya_handleClientLoad";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(e,
d)}};b.handleClientLoad=function(){delete window.__gigya_handleClientLoad;b.initializedTime=new Date;a.events.global.dispatch({eventName:"googlePlusLoaded"})};b.refreshSession=function(){};b.autoLogin=function(){a.socialize.waitForService({service:"googlePlus",callback:function(){a._.apiAdapter.isSessionValid(a.thisScript.globalConf,function(b){b||gapi.auth.authorize({client_id:a.providersConfig.googlePlus.clientId,scope:a.providersConfig.googlePlus.scopes,immediate:!0,response_type:"code"},function(b){b&&
b.code&&!a._.autoLoginInProgress&&(a._.autoLoginInProgress=!0,a.socialize.notifyLogin({providerSessions:{googlePlus:{code:b.code}}}))})})}})}})(k.googlePlus||(k.googlePlus={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(k){(function(b){b._ready=null;b.executeOnInit=function(b,e){b&&(e||(e=2E3),a.external.backplane.isLoaded()?a.external.backplane.getChannelId()||a.external.backplane._ready?(a.external.backplane._ready=!0,b()):(window.setTimeout(function(){a.external.backplane._ready||(a.external.backplane._ready=!0,b())},e),Backplane(function(){a.external.backplane._ready=!0;b()})):b())};b.isLoaded=function(){return"undefined"!=typeof Backplane};b.getChannelId=function(){if(a.external.backplane.isLoaded())return Backplane.getChannelID()};
b.resetChannel=function(){a.external.backplane.isLoaded()&&Backplane.resetCookieChannel()};a.events.global.add("logout",a.external.backplane.resetChannel)})(k.backplane||(k.backplane={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){a.getMetaTag=function(a){for(var b=document.getElementsByTagName("meta"),d=0;d<b.length;d++)if(b[d].getAttribute("property")==a&&b[d].getAttribute("content"))return b[d].getAttribute("content")}})(a.opengraph||(a.opengraph={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(k){(function(a){a[a.LocalStorageListener=0]="LocalStorageListener";a[a.PostMessage=1]="PostMessage";a[a.Flash=2]="Flash"})(k.MessagingMethod||(k.MessagingMethod={}));k.checkCompleteRegistration=function(b,g,e){var d,c;if(!g.dontHandleScreenSet&&(206001==b.errorCode||403043==b.errorCode||206002==b.errorCode||206003==b.errorCode||403101==b.errorCode||403102==b.errorCode||403110==b.errorCode||403100==b.errorCode)){var h;403110==b.errorCode&&(h=c=!0);g.defaultMobileRegScreenSet&&
a.localInfo.isMobile?d=g.defaultMobileRegScreenSet:g.defaultRegScreenSet&&(d=g.defaultRegScreenSet)}d?a.accounts.showScreenSet({newPopup:h,initialResponse:b,screenSet:d,onHide:function(a){"finished"===a.reason&&a.user?e({errorCode:0,userInfo:a.user},!0,c):e(b)}}):e(b)};k.getGigyaSettings=function(b){var g=a.utils.localStorage.getItem("gigyaSettings");try{g=a.utils.JSON.deserialize(g)}catch(e){g={}}g||(g={});return a.utils.JSON.serialize(g[b])};k.setGigyaSettings=function(b,g){var e=a.utils.localStorage.getItem("gigyaSettings");
try{e=a.utils.JSON.deserialize(e)}catch(d){e={}}e||(e={});e[b]||(e[b]={});for(var c in g)e[b][c]=g[c];a.utils.localStorage.setItem("gigyaSettings",a.utils.JSON.serialize(e))};k.delGigyaSettings=function(b,g){if(b){var e=a.utils.localStorage.getItem("gigyaSettings");e&&(e=a.utils.JSON.deserialize(e),delete e[b],a.utils.localStorage.setItem("gigyaSettings",a.utils.JSON.serialize(e)))}else a.utils.localStorage.removeItem("gigyaSettings")};k.handleSpecialFields=function(b){var g=a.socialize.Collection,
e=function(b,c){for(var d=[],e=0,g=b[e];g;)d.push(new c(g)),d[e].identities&&a._.convertIdentitiesArrayToObject(d[e]),g=b[++e];return d};b.photos&&(b.photos=new g(b.photos,"photoID"));b.albums&&(b.albums=new g(b.albums,"albumID"));b.contacts&&(b.contacts=new g(e(b.contacts,a.socialize.Contact),"email"));b.friend&&(b.friend=new g(e(b.friend,a.socialize.Friend),"UID"));b.user&&(b.user=new a.socialize.User(b.user));if(b.friends&&b.friends instanceof Array){for(var d=[],c=0;c<b.friends.length;c++)d.push(b.friends[c].UID);
b.UIDs=d.join(",");b.friends=new g(e(b.friends,a.socialize.Friend),"UID")}};k.convertIdentitiesArrayToObject=function(b){if(null==b.identities)b.identities={};else if(b.identities.constructor==Array){var g=b.identities;b.identities={};for(var e=0;e<g.length;e++)b.identities[g[e].provider]=new a.socialize.Identity(g[e])}};k.addUserInfoToEvent=function(b,g,e,d){d=b.user||b.userInfo;null==g&&(g={});null!=d&&(g.user=a.utils.object.clone(d),null!=b.isLoggedIn&&(g.user.isLoggedIn=b.isLoggedIn),null!=b.isSiteUID&&
(g.user.isSiteUID=b.isSiteUID),null!=b.iRank&&(g.user.iRank=b.iRank));e&&(a.utils.object.extractProperties(b,g,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID"),null!=g.user&&(g.UID=d.UID,g.isSiteUID=d.isSiteUID));return g};k.sendEmailNative=function(b){var g=b.userAction||{};document.location.href="mailto:?to=&subject="+(g.title||"")+"&body="+(g.linkBack||"");a.socialize.sendEmail(b,{dontSendEmail:!0})}})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(k){function b(){a.utils.script.load(a.thisScript.base+"/js/gigya.services.socialize.plugins.log.min.js",null,function(){a.log.showConfig()},!0)}k._log=[];k._isEnabled=function(){return"1"==a.utils.cookie.get("_gig_dbgConsole_log")};k.addLog=function(b,e){if(a.log._isEnabled()){e=a.utils.object.clone(e,!0,!1,4,null,!0);var d=b;null!=e&&(d+=":"+("object"==typeof e?"\n":"")+a.utils.JSON.serialize(e,!0,!0));k._log.push(d);"object"==typeof console&&console.log(d);null!=document.getElementById("gigya_log")&&
a.log.show&&a.log.show()}};k.logCall=function(b,e,d){d||(d=e.lastSource);a.log.addLog("Calling "+b+(d&&d!=b?" for "+d:"")+(e.source&&d!=e.source?" initiated from "+e.source:"")+" with these params",e)};k.debug=b;k.showLog=function(){a.utils.script.load(a.thisScript.base+"/js/gigya.services.socialize.plugins.log.min.js",null,function(){a.log.show()},!0)};k.show=function(){};k.showConfig=function(){};a.utils.functions.createAlias("gigya.debug",b)})(a.log||(a.log={}))})(gigya||(gigya={}));
var defaultObjects={},defaultObjectsDef={User:"personwithuid+isLoggedIn|false,isConnected|false,isSiteUser|false,identities|{},providers|[],timestamp,UIDSig,UIDSignature,signatureTimestamp,loginProvider,loginProviderUID,capabilities|{}",Friend:"personwithuid+timestamp,friendshipSig,friendshipSignature,signatureTimestamp,timestamp,isSiteUser|false,identities|{}",Identity:"person+isExpiredSession|false,allowsLogin|false,providerUID,provider,isLoginIdentity|false,missingPermissions",Contact:"provider,firstName,lastName,nickname,email,photoURL",
person:"nickname,photoURL,thumbnailURL,birthDay|0,birthMonth|0,birthYear|0,gender,email,proxiedEmail,country,state,city,zip,firstName,lastName,profileURL,age|0",personwithuid:"person+UID,isSiteUID|false",UserAction:"actorUID,actorNickname,actionName,date|new Date(),targets|[],images|[],actionData1,actionData2,iconURL,title,linkBack,userMessage,description,actionLinks|[],mediaItems|[],subtitle"},createDefaultObject=function(a){var k={};a=defaultObjectsDef[a];-1!=a.indexOf("+")&&(k=createDefaultObject(a.split("+")[0]),
a=a.split("+")[1]);a=a.split(",");for(var b=0;b<a.length;b++){var g="",e=a[b].split("|");if(1<e.length)try{g=gigya.utils.JSON.deserialize(e[1])}catch(d){}k[e[0]]=g||""}return k},_createConstructor=function(a){return function(k){var b=defaultObjects[a],g;for(g in b)this[g]=gigya.utils.object.clone(b[g]);if("object"==typeof k)for(g in k)"function"!=typeof k[g]&&(this[g]=gigya.utils.object.clone(k[g]))}},def;
for(def in defaultObjectsDef)defaultObjects[def]=createDefaultObject(def),gigya.socialize[def]=_createConstructor(def);gigya.socialize.Collection=function(a,k){this.arr=a;this._key=k?k:""};
gigya.socialize.Collection.prototype={asArray:function(){return this.arr},each:function(a){for(var k=0,b=this.arr[k];b;)a(b,k),k++,b=this.arr[k]},getById:function(a){"undefined"==typeof this._hash&&this._buildHash();return(this._hash?this._hash:this.arr)[a]},getSize:function(){return this.arr.length},_buildHash:function(){var a=this._hash={},k=this._key;this.each(function(b,g){a["function"==typeof b[k]?b[k]():b[k]]=b})}};
gigya.socialize.UserAction.prototype={clone:function(){return new gigya.socialize.UserAction(gigya.utils.object.clone(this,!0,!0))},getTemplate:function(){return this.titleTemplate},setTemplate:function(a){this.titleTemplate=a},getActor:function(a){return{UID:this.actorUID,nickname:this.actorNickname}},setActionName:function(a){this.actionName=a;return this},getActionName:function(a){return this.actionName},getTemplateFields:function(){var a=[],k;for(k in this.templateFields)a.push(this.templateFields[k]);
return new gigya.socialize.Collection(a,"fieldName")},setTemplateField:function(a,k,b){this.templateFields[a]={fieldName:a,text:k,href:b};return this},getTemplateField:function(a){return this.templateFields[a]?this.templateFields[a]:null},addTarget:function(a){if("object"==typeof a)return this.targets.push({UID:a.UID,nickname:a.nickname?a.nickname:""}),this;if("string"==typeof a)return this.targets.push({UID:a,nickname:""}),this},addActionLink:function(a,k){this.actionLinks.push({text:a,href:k?k:
""});return this},addMediaItem:function(a){this.mediaItems.push(a);return this},setTitle:function(a){a&&(this.title=a);return this},setLinkBack:function(a){a&&a.toString&&(a=a.toString());a&&(this.linkBack=a);return this},setUserMessage:function(a){this.userMessage=a?a:"";return this},setDescription:function(a){this.description=a?a:"";return this},addImage:function(a,k){this.addMediaItem({type:"image",src:a,href:k})},getImages:function(){return new gigya.socialize.Collection(this.images,"")},getTargets:function(){return new gigya.socialize.Collection(this.targets,
"UID")},setIconURL:function(a){this.iconURL=a;return this},getIconURL:function(){return this.iconURL},getDate:function(){return this.date},setActionData1:function(a){this.actionData1=a;return this},getActionData1:function(a){return this.actionData1},setActionData2:function(a){this.actionData2=a;return this},getActionData2:function(a){return this.actionData2},setSubtitle:function(a){this.subtitle=a;return this},getSubtitle:function(){return this.subtitle}};
(function(a){(function(k){(function(b){function g(a,c){"undefined"===typeof c&&(c=b.arProviders);for(var d=0;d<c.length;d++)if(c[d].name.toLowerCase()==a.toLowerCase())return c[d]}function e(b){b=b.split(",");for(var c=0;c<b.length;c++){var d=b[c].replace(/^\s+|\s+$/g,"");a._.providers._aliases[d]&&(b[c]=a._.providers._aliases[d])}return b.join(",")}function d(a,c){"undefined"===typeof c&&(c=b.arProviders);for(var d=0;d<c.length;d++)if(c[d].ID==a)return c[d]}function c(a,b,c){"undefined"===typeof b&&
(b="");"undefined"===typeof c&&(c=a.arProviders);b=b.toLowerCase();b=b.split(" ").join("").toLowerCase().split(",");b=s(b,c);for(c=0;c<b.length;c++)for(var d=0;d<a.length;d++){var e=a[d];(e=e.name||e.toString())&&(e=e.toLowerCase());e==b[c]&&a.splice(d,1)}return a}function h(a,b){null==b&&(b=[]);for(var c=[],d=0;d<a.length;d++){for(var e=a[d],f=!0,g=0;g<b.length;g++){for(var h=!1,k=0;k<e.arDefaultCapabilities.length;k++)if(e.arDefaultCapabilities[k].toLowerCase()==b[g].toLowerCase()){h=!0;break}if(!h){f=
!1;break}}f&&c.push(e)}return c}function k(){return b.arProviders.concat()}function f(b,c){"undefined"===typeof c&&(c=b.arProviders);b=(""+b).split(" ").join("").toLowerCase();b=e(b);for(var d=(""+b).split(","),d=s(d,c),f=[],h=0;h<d.length;h++){var k=g(d[h],c);null!=k&&-1==a.utils.array.indexOf(f,k)&&f.push(k)}return f}function s(a,c){c||(c=b.arProviders);for(var d=[],e=0;e<a.length;e++)if("*"==a[e])for(var f=0;f<c.length;f++){for(var g=!1,h=0;h<a.length;h++)a[h].toLowerCase()==c[f].name.toLowerCase()&&
(g=!0);g||c[f].explicitOnly||d.push(c[f].name)}else d.push(a[e]);return d}b._aliases={};var n=function(){function a(c,d,e,f,g,h,k){this.ID=c;this.displayName=d;this.width=e;this.height=f;this.explicitOnly=h;this.aliases=k;this.windowOptions="menubar=0,toolbar=0,resizable=1,scrollbars=1,width="+e+",height="+f;this.arDefaultCapabilities=g.split(",");this.name=d.toLowerCase().split(" ").join("").split("!").join("").split("+").join("plus");if(k)for(b._aliases||(b._aliases={}),c=k.split("|"),d=0;d<c.length;d++)b._aliases[c[d]]=
this.name;"messenger"==this.name&&(this.displayName="Microsoft");"customopenid"==this.name&&(this.displayName="OpenID")}a.prototype.toString=function(){return this.name};return a}();b.Provider=n;b.arProviders=[new n(64,"Facebook",650,400,"login,friends,places,status,actions,photos,offlineaccess,proxiedemail,checkins,facebookactions"),new n(9012,"Twitter",800,440,"login,friends,notifications,actions,status,places,checkins"),new n(72,"Google+",560,600,"login,friends,contacts",!1,"google|googleplus"),
new n(9042,"LinkedIn",865,450,"login,friends,status,actions,notifications"),new n(9803,"Yahoo",500,567,"login,friends,contacts,notifications"),new n(1047,"Messenger",380,540,"login,contacts",!1,"messenger|microsoft"),new n(9832,"Instagram",440,420,"login,photos"),new n(9222,"Odnoklassniki",888,425,"login"),new n(9003,"Digg",730,590,"login",!0),new n(9007,"FourSquare",1E3,650,"login,friends,places,checkins"),new n(9809,"Orkut",610,510,"login,friends,status,actions,photos"),new n(8191,"Renren",450,
350,"login,friends,status,actions"),new n(8203,"QQ",570,460,"login"),new n(9821,"Sina",640,380,"login,status,actions"),new n(4228,"Mixi",1E3,720,"login,friends,actions,photos",!0),new n(9830,"Yahoo! JAPAN",980,700,"login",!0),new n(8205,"Spiceworks",640,380,"login",!0),new n(8190,"Kaixin",610,510,"login,friends"),new n(9041,"VKontakte",610,510,"login,friends,photos,status,actions"),new n(9800,"AOL",530,720,"login"),new n(4096,"WordPress",700,540,"login"),new n(256,"Blogger",760,400,"login"),new n(16,
"LiveJournal",670,360,"login"),new n(1043,"VeriSign",940,500,"login"),new n(1024,"Typepad",730,590,"login"),new n(4120,"OpenID",730,590,"login"),new n(4218,"Netlog",730,590,"login",!0),new n(4222,"SignOn",870,900,"login",!0),new n(4224,"Orange France",730,590,"login",!0),new n(5002,"Livedoor",970,700,"login",!0),new n(8202,"VZnet",610,510,"login"),new n(9216,"Skyrock",610,510,"login,friends,status",!0),new n(5004,"Fox News",730,590,"login",!0),new n(1051,"PayPal",400,550,"login",!0),new n(9058,"Amazon",
785,510,"login",!0),new n(9219,"Xing",785,510,"login,friends",!0),new n(4121,"Custom OpenID",730,590,"login",!0),new n(4122,"Custom SAML",730,590,"login",!0),new n(6002,"Site",730,590,"",!0)];b.getProviderByName=g;b.replaceProviderAliases=e;b.getProviderById=d;b.hideProvidersByName=c;b.getProvidersForRequiredCapabilities=h;b.getAllProviders=k;b.getProvidersByName=f;b.replaceWildcard=s;a.utils.functions.createAlias("gigya.socialize.getAllProviders",k);a.utils.functions.createAlias("gigya.socialize.replaceProviderAliases",
e);a.utils.functions.createAlias("gigya.socialize.getProvidersByName",f);a.utils.functions.createAlias("gigya.socialize._getProviderByName",g);a.utils.functions.createAlias("gigya.socialize.hideProvidersByName",c);a.utils.functions.createAlias("gigya.socialize._getProviderByID",d);a.utils.functions.createAlias("gigya.socialize.getProvidersForRequiredCapabilities",h)})(k.providers||(k.providers={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(k){function b(){for(;k.queue&&0<k.queue.length;){var b=a.utils.object.clone(k.queue.splice(0,5),!0,!0);a.gscounters.sendReport({reports:b,noAuth:!g(b)})}}function g(a){for(var b=0;b<a.length;b++){var c=a[b];if("loadc"!==c.name&&"load"!==c.name||"loadc"===c.name&&c.reportData&&c.reportData.actionCounterPath)return!0}return!1}k.queue;k.trackAddressBarShares=function(){if(a.thisScript.globalConf.trackAddressBarShares){var b=a._.apiAdapter.getTokenParam(a.thisScript.APIKey,"UUID"),
d=document.location.href.split("#");1!=d.length&&""!=d[1]||document.location.replace("#guid="+(b?b:"_"))}};k.report=function(b,d,c,h,l,f,s){"undefined"===typeof f&&(f={});"undefined"===typeof s&&(s=!1);b=a.utils.object.removeUndefined({name:b,time:(new Date).getTime().toString(),source:h,sourceData:l,reportData:f,cid:c});s?(s=[b],a.gscounters.sendReport({reports:s,noAuth:!g(s)})):(k.queue||(k.queue=[]),k.queue.push(b))};k.init=function(){setInterval(b,5E3)};k.reportLoad=function(a,b){if(!b._reportedLoad&&
b.containerID){b._reportedLoad=!0;var c="load";"gigya.socialize.plugins.reactions.showReactionsBarUI"!=a&&("gigya.socialize.plugins.simpleshare.showSimpleShareUI"==a&&(c="loadSimple"),this.report(c,b.APIKey,b.cid,b.source,b.sourceData))}}})(a.reports||(a.reports={}))})(gigya||(gigya={}));
(function(a){a.build||(a.build={version:"",time:""});a.providersConfig||(a.providersConfig={});a.isGigya||(a.isGigya=!0);a.partnerSettings||(a.partnerSettings={authMode:"cookie",baseDomains:"",plugins:{apiDomain:"us1.gigya.com"}});a.thisScript;(function(a){a.autoLoginInProgress})(a._||(a._={}));var k;(function(b){function g(b){"1"==a.utils.cookie.get("gig_debug")?a.socialize.showDebugUI({ignoreApiQueue:!0,waitForDebug:!1,onLoad:b}):b()}function e(){a.utils.functions.invokeOnPageLoad(function(){"undefined"!=
typeof window.gigya_omniture_conf&&a.utils.script.load(a.thisScript.base+"/js/GenesisExchange_Gigya.min.js")})}function d(){var b=a.partnerSettings.baseDomains;if(b)for(var b=b.split(","),c=0;c<b.length;c++){var d=b[c],e=a.localInfo.pageDomain.indexOf(d);if(0<=e&&e==a.localInfo.pageDomain.length-d.length&&(0==e||"."==a.localInfo.pageDomain.charAt(e-1)))return d}return document.location.href.split("://")[1].split("/")[0]}function c(a){a||(a="en-US");a=a.replace("_","-").toLowerCase();var b=a.split("-"),
c=b[0],b=1<b.length?b[1]:c,b=b.toUpperCase();switch(a){case "es-mx":case "pt-br":case "zh-cn":case "zh-hk":case "zh-tw":case "te-st":case "fr-inf":case "de-inf":case "es-inf":case "nl-inf":break;default:a=c}return{full:c+"-"+b,langCode:a,countryCode:b}}function h(b){for(var d=document.getElementsByTagName("script"),e,f=d.length-1;0<=f;f--){var g=d[f],k=g.src.toLowerCase();if(""!=k&&(-1<k.indexOf("//cdn.gigya.com")||-1<k.indexOf("//cdns.gigya.com")||-1<k.indexOf("?apikey="))&&(-1<k.indexOf("gigya.js")||
-1<k.indexOf("socialize.js")||-1<k.indexOf("socialize2.js")||-1<k.indexOf("gsjssdk.js"))){e=g;break}}if(e&&!window.__gig_hidescript){var d=e.src.split("/"),f=a.utils.URL.getParamsFromURL(e.src,!0)||{},l;if(""!=e.innerHTML.replace(/^\s+|\s+$/g,""))try{l=a.utils.JSON.deserialize(e.innerHTML),"object"!=typeof l&&(l={})}catch(n){alert("Gigya global configuration object parse error")}a.thisScript={scriptElement:e,protocol:0==e.src.toLowerCase().indexOf("https")?"https":"http",base:d[0]+"//"+d[2],APIKey:f.apikey,
lang:c(f.lang||(l?l.lang:null)),globalConf:a.utils.object.merge([a.partnerSettings.plugins||{},l||{},window.__gigyaConf||{}]),URLParams:f};!a.thisScript.APIKey&&"object"==typeof console&&console.warn?console.warn("**** WARNING - Loading socialize.js without an APIKey parameter is unsupported and may result in an unexpected behavior.  ****"):a.thisScript.globalConf.APIKey=a.thisScript.APIKey;a.thisScript.globalConf.lang=a.thisScript.lang.langCode;b()}else 10>m?(m++,window.setTimeout(function(){h(b)},
200)):(a.thisScript={scriptElement:null,protocol:"http:"==document.location.protocol?"http":"https",base:"https:"==document.location.protocol?"https://cdns.gigya.com":"http://cdn.gigya.com",APIKey:"",lang:c(""),globalConf:{},URLParams:{}},b())}function k(b){var c=window.__gigAPIAdapterSettings;c&&"mobile"==c.getAdapterName()&&c.getAPIKey()==a.thisScript.APIKey?a._.apiAdapter=new a._.apiAdapters.mobile.MobileAdapter:a._.apiAdapter=new a._.apiAdapters.web.WebAdapter;a.utils.functions.createAlias("gigya.auth.loginToken.getTokenParam",
a._.apiAdapter.getTokenParam);g(function(){a._.apiAdapter.init(function(){b()})})}function f(){var b=a.utils.URL.getParamsFromURL(document.location.href);b.errorCode&&b.regToken&&a._.checkCompleteRegistration(b,a.thisScript.globalConf,function(){})}function s(){var b=a.localInfo;b.messagingMethod=b.isIE11||b.isIOSChrome?0:b.supportsPostMessage?1:2}function n(){a.utils.queue.queueForExecution("API",function(){a.utils.functions.invokeOnPageLoad(function(){a.providersConfig.facebook&&a.external.facebook.load(!1);
a.providersConfig.googlePlus&&a.external.googlePlus.load()})})}var m=0;(function(){if(window._isAPIProxy)a._.apiAdapters.web.APIProxy.init();else{a.utils.queue.hold("bootstrap","API");a.partnerSettings.baseDomain=d();var b=a.partnerSettings.plugins,c;c=a.partnerSettings.customAPIDomainPrefix?a.partnerSettings.customAPIDomainPrefix+"."+a.partnerSettings.baseDomain:a.partnerSettings.plugins.apiDomain;b.apiDomain=c;a.reports.init();h(function(){s();a.thisScript.globalConf.customEventMap&&a.events.addMap(a.thisScript.globalConf.customEventMap);
k(function(){a.utils.queue.release("bootstrap","API");n();a.thisScript.globalConf.autoLogin&&(a.external.facebook.autoLogin(),a.external.googlePlus.autoLogin());f();a.reports.trackAddressBarShares();a.utils.functions.invokeOnPageLoad(function(){window.setTimeout(function(){a.socialize.trackReferrals()},1E3)})});e();"function"==typeof onGigyaServiceReady&&onGigyaServiceReady("socialize");var b={sref:document.referrer};a.thisScript.globalConf.actionCounterPath&&(b.actionCounterPath=a.thisScript.globalConf.actionCounterPath);
a.reports.report("loadc",a.thisScript.APIKey,null,null,null,b)})}})()})(k||(k={}))})(gigya||(gigya={}));


} else if (typeof console == 'object' && console.warn) {
console.warn('**** Socialize.js loaded twice ****');
}
